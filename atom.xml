<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Was ich so treibe...]]></title>
  <link href="http://uli-heller.github.com/atom.xml" rel="self"/>
  <link href="http://uli-heller.github.com/"/>
  <updated>2013-11-10T08:22:31+01:00</updated>
  <id>http://uli-heller.github.com/</id>
  <author>
    <name><![CDATA[Uli Heller]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[GREP - Zeilen aus Umgebungsvariable löschen]]></title>
    <link href="http://uli-heller.github.com/blog/2013/11/10/grep/"/>
    <updated>2013-11-10T09:00:00+01:00</updated>
    <id>http://uli-heller.github.com/blog/2013/11/10/grep</id>
    <content type="html"><![CDATA[<p>Ich habe ein Projekt &ldquo;geerbt&rdquo;, das zu einem großen Teil aus Shell-Skripts besteht.
In einem dieser Skripte wird die Ausgabe eines Kommandos in einer Umgebungsvariablen
&ldquo;gesammelt&rdquo; und ein Fehler ausgegeben, wenn die Umgebungsvariable ein Wort enthält.</p>

<p>Leider generiert besagtes Kommando seit neuestem zusätzliche Ausgaben auch wenn alles
OK ist, das Skript läuft dann auf einen Fehler.</p>

<p>Nun brauche ich eine Möglichkeit zum intelligenten Filtern des Inhaltes der Variablen!</p>

<!-- more -->


<h2>Entfernen eines Musters</h2>

<p>Mit GREP schaffe ich&rsquo;s recht einfach, alle Ausgaben, die mit &ldquo;Starten&rdquo; beginnen, zu entfernen:</p>

<pre><code># Funktion zum Ausfiltern aller Zeilen, die einem Muster entsprechen
filterOut () {
  grep -v "^Starten "
}

# Testdaten
AA="$(cat &lt;&lt;EOF
Starten von Replicate.sql
Replicate.sql running
Replicate.sql finished
EOF
)"

# Filterung durchführen
echo "${AA}"|filterOut
# Ausgaben:
#   Replicate.sql running
#   Replicate.sql finished
</code></pre>

<h2>Entfernen mehrerer Muster</h2>

<p>Leider gibt es kein einfaches Muster, um alle ungewünschten Ausgaben rauszuwerfen. Wir brauchen
mehrere Muster!</p>

<pre><code># Funktion zum Ausfiltern aller Zeilen, die einem von mehreren Mustern entsprechen
filterOut () {
  grep -v              \
    -e "^Starten "     \
    -e "sql finished$"
}

# Testdaten
AA="$(cat &lt;&lt;EOF
Starten von Replicate.sql
Replicate.sql running
Replicate.sql finished
EOF
)"

# Filterung durchführen
echo "${AA}"|filterOut
# Ausgaben:
#   Replicate.sql running
</code></pre>

<h2>AIX</h2>

<p>Das &ldquo;geerbte&rdquo; Projekt läuft unter AIX 6.1. Schön wär&rsquo;s, wenn obiges Konstrukt auch dort funktioniert.
Ein kurzer Quercheck zeigt: Ja, GREP verhält sich unter AIX genauso.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Persönliche Git-Zentrale]]></title>
    <link href="http://uli-heller.github.com/blog/2013/10/09/persoenliche-git-zentrale/"/>
    <updated>2013-10-09T11:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/10/09/persoenliche-git-zentrale</id>
    <content type="html"><![CDATA[<p>Für ein Kundenprojekt brauche ich ein &ldquo;zentrales&rdquo; Git-Repository.
Hier die Randbedingungen:</p>

<ul>
<li>geringer Admin-Aufwand</li>
<li>möglichst wenig Zusatzprogramme einsetzen (Ruby, Gitlab, &hellip;)</li>
<li>kein öffentlicher Zugriff</li>
</ul>


<p>Umgesetzt habe ich das ganze mit einem SSH-Konto auf meinem Fileserver.</p>

<!-- more -->


<h2>Fileserver</h2>

<h3>SSH-Konto</h3>

<ul>
<li>Benutzer auf Fileserver ist vorhanden: &ldquo;bert&rdquo;</li>
<li>SSH-Anmeldung funktioniert ohne Kennwort</li>
</ul>


<h3>Git-Repository einrichten</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mkdir git
</span><span class='line'>cd git
</span><span class='line'>for p in base test server; do \
</span><span class='line'>   mkdir $p.git; \
</span><span class='line'>   ( cd "$p.git"; git --bare init ); \
</span><span class='line'>done</span></code></pre></td></tr></table></div></figure>


<h2>Arbeitsrechner</h2>

<h3>Git-Repositories mit Fileserver verknüpfen</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd git
</span><span class='line'>for p in base test server; do \
</span><span class='line'>(                             \
</span><span class='line'>  cd $p;                      \
</span><span class='line'>  git remote add fileserver bert@fileserver:git/base.git; \
</span><span class='line'>);                            \
</span><span class='line'>done</span></code></pre></td></tr></table></div></figure>


<h3>Git-Repositories auf Fileserver übertragen</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd git
</span><span class='line'>for p in base test server; do \
</span><span class='line'>(                             \
</span><span class='line'>  cd $p;                      \
</span><span class='line'>  git push fileserver master; \
</span><span class='line'>);                            \
</span><span class='line'>done</span></code></pre></td></tr></table></div></figure>


<h2>Änderungen</h2>

<h3>2013-10-13</h3>

<ul>
<li>Tippfehler korrigiert</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Probleme mit Thunderbird-Profile korrigieren]]></title>
    <link href="http://uli-heller.github.com/blog/2013/10/08/truecrypt-thunderbird/"/>
    <updated>2013-10-08T10:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/10/08/truecrypt-thunderbird</id>
    <content type="html"><![CDATA[<p>Heute war&rsquo;s mal wieder so weit: Thunderbird wollte nicht starten.
Erst meckert er, weil das Profil in Benutzung ist. Später dann erkennt
er das Profil nicht mehr.</p>

<!-- more -->


<h2>Truecrypt</h2>

<p>Ich verwende Thunderbird zusammen mit Truecrypt. Ich habe eine USB-Stick.
Auf dem liegt eine Truecrypt-Partition. Von dieser wird Thunderbird gestartet.</p>

<h3>Die Partition wird im &ldquo;Nur-Lesen&rdquo;-Modus eingebunden!</h3>

<figure class='code'><figcaption><span>Auszug aus ./var/log/syslog </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Oct  8 08:13:22 uli-hp-ssd kernel: [49292.410648] sd 7:0:0:0: [sdh] Attached SCSI disk
</span><span class='line'>Oct  8 08:13:22 uli-hp-ssd kernel: [49292.754705] FAT-fs (sdh1): Volume was not properly unmounted. Some data may be corrupt. Please run fsck.
</span><span class='line'>Oct  8 08:13:22 uli-hp-ssd ntfs-3g[9249]: Version 2012.1.15AR.1 external FUSE 28
</span><span class='line'>Oct  8 08:13:22 uli-hp-ssd ntfs-3g[9249]: Mounted /dev/sdh2 (Read-Write, label "SanNTFS", NTFS 3.1)
</span><span class='line'>Oct  8 08:13:22 uli-hp-ssd ntfs-3g[9249]: Cmdline options: rw,nosuid,nodev,uhelper=udisks,uid=1000,gid=1000,dmask=0077,fmask=0177
</span><span class='line'>Oct  8 08:13:22 uli-hp-ssd ntfs-3g[9249]: Mount options: rw,nosuid,nodev,uhelper=udisks,allow_other,nonempty,relatime,default_permissions,fsname=/dev/sdh2,blkdev,blksize=4096
</span><span class='line'>Oct  8 08:13:22 uli-hp-ssd ntfs-3g[9249]: Global ownership and permissions enforced, configuration type 7
</span><span class='line'>Oct  8 08:13:42 uli-hp-ssd kernel: [49312.757964] FAT-fs (dm-8): Volume was not properly unmounted. Some data may be corrupt. Please run fsck.
</span><span class='line'>Oct  8 08:14:00 uli-hp-ssd kernel: [49331.213542] FAT-fs (dm-8): error, fat_free_clusters: deleting FAT entry beyond EOF
</span><span class='line'>Oct  8 08:14:00 uli-hp-ssd kernel: [49331.213550] FAT-fs (dm-8): Filesystem has been set read-only</span></code></pre></td></tr></table></div></figure>


<h3>Freigeben der Truecrypt-Partition</h3>

<p>Zunächst muß die Truecrypt-Partition ausgehängt werden, damit sie für
Korrekturen frei ist.</p>

<figure class='code'><figcaption><span>Truecrypt-Partition freigeben </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo -s
</span><span class='line'>umount /media/truecrypt1</span></code></pre></td></tr></table></div></figure>


<h3>Fsck ohne Zusatzoptionen</h3>

<p>Erster Versuch: Ausführung von fsck.vfat. Leider kein Erfolg,
das Dateisystem wird nicht korrigiert!</p>

<figure class='code'><figcaption><span>fsck ohne Zusatzoptionen </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># fsck.vfat /dev/mapper/truecrypt1
</span><span class='line'>dosfsck 3.0.12, 29 Oct 2011, FAT32, LFN
</span><span class='line'>There are differences between boot sector and its backup.
</span><span class='line'>Differences: (offset:original/backup)
</span><span class='line'>  65:01/00
</span><span class='line'>1) Copy original to backup
</span><span class='line'>2) Copy backup to original
</span><span class='line'>3) No action
</span><span class='line'>? 3
</span><span class='line'>/thunderbird-uli/TestPilotErrorLog.log
</span><span class='line'>  File size is 527203 bytes, cluster chain length is > 528384 bytes.
</span><span class='line'>  Truncating file to 527203 bytes.
</span><span class='line'>...
</span><span class='line'>/thunderbird-uli/ImapMail/localhost/INBOX
</span><span class='line'>  File size is 270166754 bytes, cluster chain length is 266158080 bytes.
</span><span class='line'>  Truncating file to 266158080 bytes.
</span><span class='line'>Reclaimed 779 unused clusters (3190784 bytes).
</span><span class='line'>Free cluster summary wrong (1189209 vs. really 1190739)
</span><span class='line'>1) Correct
</span><span class='line'>2) Don't correct
</span><span class='line'>? 1
</span><span class='line'>Leaving file system unchanged.
</span><span class='line'>/dev/mapper/truecrypt1: 4473 files, 1245896/2436635 clusters</span></code></pre></td></tr></table></div></figure>


<h3>Fsck mit Option &lsquo;-a&rsquo;</h3>

<p>Mit der Option &lsquo;-a&rsquo; sollte es eigentlich klappen. Leider gibt&rsquo;s am
Ende die Fehlermeldung &ldquo;Unable to create unique name&rdquo;.</p>

<figure class='code'><figcaption><span>fsck mit Option -a </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root@uli-hp-ssd:/var/log# fsck.vfat -y /dev/mapper/truecrypt1 
</span><span class='line'>dosfsck 3.0.12, 29 Oct 2011, FAT32, LFN
</span><span class='line'>There are differences between boot sector and its backup.
</span><span class='line'>Differences: (offset:original/backup)
</span><span class='line'>  65:01/00
</span><span class='line'>  Not automatically fixing this.
</span><span class='line'>/thunderbird-uli/TestPilotErrorLog.log
</span><span class='line'>  File size is 527203 bytes, cluster chain length is > 528384 bytes.
</span><span class='line'>  Truncating file to 527203 bytes.
</span><span class='line'>...
</span><span class='line'>/thunderbird-uli/ImapMail/localhost/INBOX
</span><span class='line'>  File size is 270166754 bytes, cluster chain length is 266158080 bytes.
</span><span class='line'>  Truncating file to 266158080 bytes.
</span><span class='line'>Unable to create unique name</span></code></pre></td></tr></table></div></figure>


<h3>Mehrfache Ausführung mit Option &lsquo;-r&rsquo;</h3>

<p>Als nächstes führe ich fsck.vfat mehrfach mit der Option &lsquo;-r&rsquo; aus.
Bis auf die Sache mit dem Boot Sector bestätige ich einfach jede Änderung.
Auffällig: Beim zweiten Durchlauf werden neue Fehler gefunden und korrigiert.
Erst beim dritten Durchlauf gibt es keinen Fehler mehr.</p>

<figure class='code'><figcaption><span>Erster Versuch </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root@uli-hp-ssd:/var/log# fsck.vfat -r /dev/mapper/truecrypt1 
</span><span class='line'>dosfsck 3.0.12, 29 Oct 2011, FAT32, LFN
</span><span class='line'>There are differences between boot sector and its backup.
</span><span class='line'>Differences: (offset:original/backup)
</span><span class='line'>  65:01/00
</span><span class='line'>1) Copy original to backup
</span><span class='line'>2) Copy backup to original
</span><span class='line'>3) No action
</span><span class='line'>? 3
</span><span class='line'>/thunderbird-uli/TestPilotErrorLog.log
</span><span class='line'>  File size is 527203 bytes, cluster chain length is > 528384 bytes.
</span><span class='line'>  Truncating file to 527203 bytes.
</span><span class='line'>/thunderbird-uli/virtualFolders.dat
</span><span class='line'>...
</span><span class='line'>/thunderbird-uli/ImapMail/localhost/INBOX
</span><span class='line'>  File size is 270166754 bytes, cluster chain length is 266158080 bytes.
</span><span class='line'>  Truncating file to 266158080 bytes.
</span><span class='line'>Reclaimed 779 unused clusters (3190784 bytes).
</span><span class='line'>Free cluster summary wrong (1189209 vs. really 1190739)
</span><span class='line'>1) Correct
</span><span class='line'>2) Don't correct
</span><span class='line'>? 1
</span><span class='line'>Perform changes ? (y/n) y
</span><span class='line'>/dev/mapper/truecrypt1: 4473 files, 1245896/2436635 clusters</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>Zweiter Versuch </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root@uli-hp-ssd:/var/log# fsck.vfat -r /dev/mapper/truecrypt1 
</span><span class='line'>dosfsck 3.0.12, 29 Oct 2011, FAT32, LFN
</span><span class='line'>There are differences between boot sector and its backup.
</span><span class='line'>Differences: (offset:original/backup)
</span><span class='line'>  65:01/00
</span><span class='line'>1) Copy original to backup
</span><span class='line'>2) Copy backup to original
</span><span class='line'>3) No action
</span><span class='line'>? 3
</span><span class='line'>Reclaimed 750 unused clusters (3072000 bytes).
</span><span class='line'>Perform changes ? (y/n) y
</span><span class='line'>/dev/mapper/truecrypt1: 4473 files, 1245896/2436635 clusters</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>Dritter Versuch </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root@uli-hp-ssd:/var/log# fsck.vfat -r /dev/mapper/truecrypt1 
</span><span class='line'>dosfsck 3.0.12, 29 Oct 2011, FAT32, LFN
</span><span class='line'>There are differences between boot sector and its backup.
</span><span class='line'>Differences: (offset:original/backup)
</span><span class='line'>  65:01/00
</span><span class='line'>1) Copy original to backup
</span><span class='line'>2) Copy backup to original
</span><span class='line'>3) No action
</span><span class='line'>? 3
</span><span class='line'>/dev/mapper/truecrypt1: 4473 files, 1245896/2436635 clusters</span></code></pre></td></tr></table></div></figure>


<h3>Nochmals: Fsck mit Option &lsquo;-a&rsquo;</h3>

<p>Schlußtest nochmal mit der Option &lsquo;-a&rsquo;: Kein Fehler mehr vorhanden!</p>

<figure class='code'><figcaption><span>Nochmals fsck mit &#8216;-a&#8217;  </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root@uli-hp-ssd:/var/log# fsck.vfat -a /dev/mapper/truecrypt1 
</span><span class='line'>dosfsck 3.0.12, 29 Oct 2011, FAT32, LFN
</span><span class='line'>There are differences between boot sector and its backup.
</span><span class='line'>Differences: (offset:original/backup)
</span><span class='line'>  65:01/00
</span><span class='line'>  Not automatically fixing this.
</span><span class='line'>/dev/mapper/truecrypt1: 4473 files, 1245896/2436635 clusters</span></code></pre></td></tr></table></div></figure>


<h3>Truecrypt-Partition wieder einbinden</h3>

<figure class='code'><figcaption><span>Truecrypt-Partition einbinden </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mount /dev/mapper/truecrypt1 /media/truecrypt1/</span></code></pre></td></tr></table></div></figure>


<p>&hellip; klappt nun im Schreiblese-Modus!</p>

<h2>Thunderbird</h2>

<p>Nach den Korrekturen an der Truecrypt-Partition startet Thunderbird
leider nicht mehr richtig: Ich werde aufgefordert, ein neues Konto
anzulegen.</p>

<h3>Sichtung des Adressbuchs</h3>

<p>Wenn ich mir direkt das Adressbuch anzeigen lasse, dann sehe ich dort noch
meine Einträge &ndash; gut!</p>

<h3>Sichtung der Datei &ldquo;prefs.js&rdquo;</h3>

<p>In meinem Profilverzeichnis /media/truecrypt1/thunderbird-uli
gibt es eine Datei &ldquo;prefs.js&rdquo;. Diese sieht allerdings sehr klein aus.
Sie hat nur eine Größe von grob 3KB.</p>

<p>Ich finde noch eine Datei &ldquo;prefs-1.js&rdquo; vom Vortag, die hat eine
Größe von grob 60 KB.</p>

<h3>Restaurieren der Datei &ldquo;prefs.js&rdquo;</h3>

<ul>
<li>Thunderbird stoppen</li>
<li><code>cp prefs-1.js prefs.js</code></li>
<li>Thunderbird starten &ndash;> klappt, sieht wieder &ldquo;normal&rdquo; aus</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[JDK unter Windows installieren ohne Administratorrechte]]></title>
    <link href="http://uli-heller.github.com/blog/2013/10/07/windows-jdk/"/>
    <updated>2013-10-07T18:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/10/07/windows-jdk</id>
    <content type="html"><![CDATA[<p>Leider muß ich bei meinem aktuellen Projekt unter Windows entwickeln.
Es handelt sich um ein Java-Projekt. Die Arbeit kann nur auf einem Notebook
erfolgen, das mir mein Auftraggeber stellt. Das Notebook läuft unter
Windows 7 und stellt eine VPN-Verbindung zum Firmennetz her.</p>

<p>Zur Entwicklung des im Projektrahmen zu erstellenden Programms benötige
ich ein JDK. Das Einspielen auf dem Notebook gestaltet sich schwierig,
denn ich habe dort keine Administratorrechte und Oracle&rsquo;s JDK benötigt
eben diese. Schöner Mist. Nachfolgend eine Beschreibung, wie ich mir
beholfen habe. Ich benötige dazu einen Linux-Rechner und einen USB-Stick.</p>

<!-- more -->


<h2>Linux-Rechner</h2>

<p>Auf meinem Linux-Rechner ist Ubuntu-12.04 installiert. Zusätzlich
benötige ich Wine. Dieses wird schnell nachinstalliert mit</p>

<pre><code>sudo apt-get install wine
</code></pre>

<p>Die Installation hat bei mir zunächst nicht geklappt &ndash; vermutlich weil
ich auch VirtualBox auf dem Linux-Rechner habe. In einem LXC-Container
ging&rsquo;s problemlos.</p>

<p>Danach:</p>

<ul>
<li>Oracle JDK für Windows x86 herunterladen von <a href="http://oracle.com">http://oracle.com</a></li>
<li>Heruntergeladene Datei in LXC-Container hineinkopieren</li>
<li>Kopierte Datei im LXC-Container ausführen mittels Wine<pre>
wine ./jdk-7u40-windows-i586.exe</pre></li>
<li>Es erscheinen diverse Fehlermeldungen &ndash;> ignorieren!</li>
<li>Ordner ~/.wine/drive_c/Program Files/java verpacken (bspw. mit <code>zip</code>)</li>
<li>Verpackten Ordner auf USB-Stick speichern</li>
</ul>


<h2>Windows-Rechner</h2>

<ul>
<li>Ordner vom USB-Stick auspacken nach C:\Uli</li>
<li>Skript erstellen zur Erweiterung der Umgebungsvariablen PATH</li>
<li>Test: <code>javac -version</code> &ndash;> javac 1.7.0_40</li>
</ul>


<p>Der Aufruf vom Java-Kompiler klappt &ndash; ich bin zufrieden!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ZFS unter Ubuntu-12.04.3]]></title>
    <link href="http://uli-heller.github.com/blog/2013/10/06/zfs/"/>
    <updated>2013-10-06T11:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/10/06/zfs</id>
    <content type="html"><![CDATA[<p>In <a href="http://uli-heller.github.com/blog/2013/07/12/zfs">Experimente mit ZFS unter Ubuntu-12.04</a> habe ich meine Experimente mit ZFS beschrieben.
Hier beschreibe ich nun, wie ich&rsquo;s dann schließlich umgesetzt habe.</p>

<!-- more -->


<h2>DEBs installieren</h2>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>sudo apt-get install make build-essential dpkg-dev
</span><span class='line'>sudo apt-get install -f
</span><span class='line'>sudo dpkg -i zfs-dkms_0.6.2-1dp01~precise1_amd64.deb <span class="se">\</span>
</span><span class='line'>  spl-dkms_0.6.2-1dp01~precise1_all.deb              <span class="se">\</span>
</span><span class='line'>  dkms_2.2.0.3-2dp01~precise1_all.deb
</span><span class='line'>sudo dpkg -i zfsutils_0.6.2-1dp01~precise1_amd64.deb <span class="se">\</span>
</span><span class='line'>  libnvpair1_0.6.2-1dp01~precise1_amd64.deb          <span class="se">\</span>
</span><span class='line'>  libuutil1_0.6.2-1dp01~precise1_amd64.deb           <span class="se">\</span>
</span><span class='line'>  libzfs1_0.6.2-1dp01~precise1_amd64.deb             <span class="se">\</span>
</span><span class='line'>  libzpool1_0.6.2-1dp01~precise1_amd64.deb
</span><span class='line'>sudo dpkg -i ubuntu-zfs_7dp01~precise1_amd64.deb     <span class="se">\</span>
</span><span class='line'>  spl_0.6.2-1dp01~precise1_amd64.deb
</span><span class='line'>sudo dpkg -i mountall_2.48-1dp01~precise1_amd64.deb
</span></code></pre></td></tr></table></div></figure>


<h2>Platten-IDs ermitteln</h2>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>ls /dev/disk/by-id/scsi-SATA_WDC*|grep -v part
</span><span class='line'>/dev/disk/by-id/scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0755994
</span><span class='line'>/dev/disk/by-id/scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0770511
</span><span class='line'>/dev/disk/by-id/scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0771577
</span><span class='line'>/dev/disk/by-id/scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0777780
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>ls /dev/disk/by-id/scsi-SATA_WDC*|grep -v part|xargs --verbose -n1 udevadm info -q path -n
</span><span class='line'>udevadm info -q path -n /dev/disk/by-id/scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0755994
</span><span class='line'>/devices/pci0000:00/0000:00:11.0/host3/target3:0:0/3:0:0:0/block/sdd
</span><span class='line'>udevadm info -q path -n /dev/disk/by-id/scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0770511
</span><span class='line'>/devices/pci0000:00/0000:00:11.0/host2/target2:0:0/2:0:0:0/block/sdc
</span><span class='line'>udevadm info -q path -n /dev/disk/by-id/scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0771577
</span><span class='line'>/devices/pci0000:00/0000:00:11.0/host0/target0:0:0/0:0:0:0/block/sda
</span><span class='line'>udevadm info -q path -n /dev/disk/by-id/scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0777780
</span><span class='line'>/devices/pci0000:00/0000:00:11.0/host1/target1:0:0/1:0:0:0/block/sdb
</span></code></pre></td></tr></table></div></figure>


<p>Aus den Ausgaben kann man diese Zuordnung erkennen:</p>

<ul>
<li>sda &ndash; scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0771577</li>
<li>sdb &ndash; scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0777780</li>
<li>sdc &ndash; scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0770511</li>
<li>sdd &ndash; scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0755994</li>
</ul>


<p>Die Platten-IDs sollten am besten auch auf den jeweiligen Einbaurahmen geschrieben
werden, damit es zu keinen Verwechslungen kommen kann.</p>

<h2>Einbaurahmen mit Platten-IDs beschriften</h2>

<p>Die Einbaurahmen werden mit den Platten-IDs beschriftet, damit
beim Ausfall einer Platte schnell der richtige Rahmen gefunden werden kann.
Beim mir ist &ldquo;sda&rdquo; ganz links, &ldquo;sdd&rdquo; ganz rechts. Die Platten-IDs sind
auch auf den Platten aufgedruckt, und zwar bspw. wie folgt:</p>

<pre><code>S/N: WCC1T0770511
</code></pre>

<p>Der Aufdruck sollte als Quercheck für die Beschriftung dienen!</p>

<h2>Zpool anlegen</h2>

<figure class='code'><figcaption><span>Zpool anlegen </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>sudo zpool create -o <span class="nv">ashift</span><span class="o">=</span>12 -f zfsdata raidz <span class="se">\</span>
</span><span class='line'>        scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0771577 <span class="se">\</span>
</span><span class='line'>        scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0777780 <span class="se">\</span>
</span><span class='line'>        scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0770511 <span class="se">\</span>
</span><span class='line'>        scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0755994
</span><span class='line'><span class="nv">$ </span>sudo zfs <span class="nb">set </span><span class="nv">compression</span><span class="o">=</span>lz4 zfsdata
</span></code></pre></td></tr></table></div></figure>


<p>Nach dem Anlegen sollte der Status kontrolliert werden:</p>

<figure class='code'><figcaption><span>Zpool kontrollieren </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>sudo zpool status
</span><span class='line'>  pool: zfsdata
</span><span class='line'> state: ONLINE
</span><span class='line'>  scan: none requested
</span><span class='line'>config:
</span><span class='line'>
</span><span class='line'>  NAME                                           STATE     READ WRITE CKSUM
</span><span class='line'>  zfsdata                                        ONLINE       0     0     0
</span><span class='line'>    raidz1-0                                     ONLINE       0     0     0
</span><span class='line'>      scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0771577  ONLINE       0     0     0
</span><span class='line'>      scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0777780  ONLINE       0     0     0
</span><span class='line'>      scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0770511  ONLINE       0     0     0
</span><span class='line'>      scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0755994  ONLINE       0     0     0
</span><span class='line'>
</span><span class='line'>errors: No known data errors
</span></code></pre></td></tr></table></div></figure>


<p>Wichtig: Alles &ldquo;ONLINE&rdquo;, keine Fehler und &ldquo;raidz1-0&rdquo; muß angezeigt werden!</p>

<h2>Plattenausfall</h2>

<p>Einen Plattenausfall erkennt man mit &ldquo;zpool status&rdquo;:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>sudo zpool status
</span><span class='line'>  pool: zfsdata
</span><span class='line'> state: DEGRADED
</span><span class='line'>status: One or more devices could not be used because the label is missing or
</span><span class='line'>  invalid.  Sufficient replicas exist <span class="k">for </span>the pool to <span class="k">continue</span>
</span><span class='line'><span class="k">  </span>functioning in a degraded state.
</span><span class='line'>action: Replace the device using <span class="s1">&#39;zpool replace&#39;</span>.
</span><span class='line'>   see: http://zfsonlinux.org/msg/ZFS-8000-4J
</span><span class='line'>  scan: scrub repaired 0 in 0h0m with 0 errors on Sun Oct  6 12:00:10 2013
</span><span class='line'>config:
</span><span class='line'>
</span><span class='line'>  NAME                                           STATE     READ WRITE CKSUM
</span><span class='line'>  zfsdata                                        DEGRADED     0     0     0
</span><span class='line'>    raidz1-0                                     DEGRADED     0     0     0
</span><span class='line'>      scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0771577  ONLINE       0     0     0
</span><span class='line'>      scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0777780  ONLINE       0     0     0
</span><span class='line'>      scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0770511  UNAVAIL      0     0     0  corrupted data
</span><span class='line'>      scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0755994  ONLINE       0     0     0
</span><span class='line'>
</span><span class='line'>errors: No known data errors
</span></code></pre></td></tr></table></div></figure>


<p>Beim Ausfall sind diese Aktionen nötig:</p>

<ul>
<li>Zugehörigen Plattenrahmen rausziehen</li>
<li>Platte tauschen</li>
<li>Rahmen neu beschriften</li>
<li>Server herunterfahren</li>
<li>Plattenrahmen mit neuer Platte einbauen</li>
<li>Server starten</li>
<li>Neue Platte einbinden: <code>sudo zpool replace zfsdata {old} {new}</code><br>
Konkretes Beispiel:<pre>
$ sudo zpool replace zfsdata \
   scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0770511 \
   scsi-SATA_WDC_WD30EFRX-68_WD-WCC1T0774712
</pre></li>
<li>Sichtung: Die neue Platte wird korrekt eingebunden und funktioniert: <code>sudo zpool status</code></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Maven/Gradle: Betrieb hinter einer Enterprise-Firewall]]></title>
    <link href="http://uli-heller.github.com/blog/2013/10/06/forward-proxy/"/>
    <updated>2013-10-06T08:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/10/06/forward-proxy</id>
    <content type="html"><![CDATA[<p>Einer meiner Kunden setzt eine Firewall kombiniert mit einem
Proxy-Server ein, um das interne Netz vom Internet abzukoppeln.
Der Zugriff vom internen Netz in&rsquo;s Internet ist dadurch stark eingeschränkt.</p>

<ul>
<li>Manche Web-Seiten werden generell geblockt &hellip; ist bislang kein Problem für mich</li>
<li>Zugriff auf&rsquo;s Internet ist generell nur mit bestimmten Browsern möglich &ndash; der HTTP Header &ldquo;User-Agent&rdquo; muß bestimmte Werte haben &hellip; dadurch werden Build-Tools wie Gradle und Maven geblockt</li>
<li>Zugriff auf&rsquo;s Internet geht generell nur, wenn man sich am Proxy-Server angemeldet hat &hellip; dadurch funktioniert bei mir der Zugriff von Eclipse aus nicht, man kann Eclipse-Plugins nur sehr umständlich installieren</li>
</ul>


<p>Zur Lösung der letzten beiden Probleme gibt es nun die Idee, einen eigenen
Proxy-Server zu betreiben, der dann die Anmeldung am
&ldquo;richtigen&rdquo; Proxy-Server übernimmt und der den User-Agent auf geeignete Werte
setzt.</p>

<!-- more -->


<h2>Das GitHub-Projekt</h2>

<p>Den Proxy-Server habe ich in Java implementiert und im Rahmen meiner &ldquo;Mini-Tools&rdquo; auf GitHub
abgelegt. Zu finden ist der Proxy-Server hier: <a href="https://github.com/uli-heller/uli-mini-tools/blob/master/forward-proxy/README.md">Forward-Proxy</a>.</p>

<h2>Die Zutaten</h2>

<p>Der eigentliche Kern des Proxy-Servers ist recht klein &ndash; die meisten Zutaten liefert das Projekt
<a href="http://www.eclipse.org/jetty/">Jetty</a>. Konkret habe ich hiervon verwendet:</p>

<ul>
<li><a href="http://www.eclipse.org/jetty/documentation/current/proxy-servlet.html">ProxyServlet</a></li>
<li><a href="http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/examples/embedded/src/main/java/org/eclipse/jetty/embedded/ProxyServer.java?id=jetty-9.0.6.v20130930">ProxyServer</a></li>
</ul>


<p>Zur Kompilierung des Projektes verwende ich <a href="http://gradle.org">Gradle</a>. Von mir selbst stammen ein paar Ergänzungen,
die</p>

<ul>
<li>diverse Einstellungen aus Properties-Dateien lesen</li>
<li>die Anmeldung am Enterprise-Proxy-Server vornehmen</li>
<li>das Programm paketieren und einfach ausführbar machen auf Kommandozeilenebene</li>
</ul>


<h2>Das Bauen</h2>

<p>Das Bauen des Projektes ist denkbar einfach, sofern ein JDK7 installiert und im PATH verfügbar ist:</p>

<ul>
<li>Shell-Fenster öffnen</li>
<li>In den Ordner &ldquo;uli-mini-tools/forward-proxy&rdquo; wechseln</li>
<li>Ausführen: <code>../gradlew</code> (&hellip; oder unter Windows: <code>..\gradlew</code>)</li>
</ul>


<p>Danach gibt es die beiden Dateien</p>

<ul>
<li>forward-proxy-{version}.sh &hellip; für Unix/Linux</li>
<li>forward-proxy-{version}.bat &hellip; für Windows</li>
</ul>


<p>Sie können direkt von der Shell aus ausgeführt werden.</p>

<h2>Der Test</h2>

<p>Getestet habe ich den neuen Proxy-Server mit einem einfachen Gradle-Projekt:</p>

<ul>
<li><p>Konfigurationsdatei &ldquo;forward-proxy.properties&rdquo; für den Forward-Proxy:</p>

<pre><code>proxyPort           = 8888
parentProxyHost     = 192.168.178.47
parentProxyPort     = 3128
parentProxyUser     = uli
parentProxyPassword = xxxxxx
replaceHeaders      = User-Agent
User-Agent          = InternetExploder
</code></pre></li>
<li><p>Start vom Forward-Proxy:</p>

<pre><code>./forward-proxy*.sh
</code></pre></li>
<li><p>gradle.properties:</p>

<pre><code>systemProp.http.proxyHost=localhost
systemProp.http.proxyPort=8888
</code></pre></li>
<li><p><a href="http://uli-heller.github.com/downloads/code/simple-gradle-project.zip">Gradle-Projekt</a> auspacken und neu bauen mit</p>

<pre><code>./gradlew --refresh-dependencies
# Windows: .\gradlew --refresh-dependencies
</code></pre></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Kompilierung und Tests überspringen beim Paketbau]]></title>
    <link href="http://uli-heller.github.com/blog/2013/10/04/kompilierung-ueberspringen/"/>
    <updated>2013-10-04T09:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/10/04/kompilierung-ueberspringen</id>
    <content type="html"><![CDATA[<p>Gelegentlich baue ich selbst Pakete für Debian/Ubuntu. Manchmal habe ich dabei Tippfehler
in Paketbeschreibungsdateien wie &ldquo;debian/rules&rdquo; und &ldquo;debian/control&rdquo;. Diese treten oftmals erst
gegen Ende des Paketbauprozesses auf und nach einer Korrektur der Fehler habe ich gerne schnell
Gewissheit, ob die Korrekturen OK sind oder nicht &ndash; ein kompletter Neubau scheidet für die
meisten Pakete dann aus.</p>

<p>Mit diesem Befehl werden Kompilierung und Übersprungen:</p>

<pre><code>fakeroot debuan/rules binary
</code></pre>

<p>Innerhalb von wenigen Sekunden weiß ich so, ob die Korrekturen richtig waren oder ob ich noch
weitere Dinge ändern muß. Wenn das Kommando durchläuft, führe ich idR. nochmals</p>

<pre><code>dpkg-buildpackage
</code></pre>

<p>aus um das Paket komplett neu zu bauen und zu paketieren.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Squid: Aufsetzen eines Proxies mit Anmeldezwang]]></title>
    <link href="http://uli-heller.github.com/blog/2013/09/22/squid/"/>
    <updated>2013-09-22T13:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/09/22/squid</id>
    <content type="html"><![CDATA[<p>Zum Test meines Mini-Projektes
<a href="https://github.com/uli-heller/uli-mini-tools/blob/master/forward-proxy/README.md">Forward-Proxy</a>
brauche ich einen Proxy, der den Zugriff auf das Internet
nur nach Anmeldung zulässt. Hierzu setze ich eine VM mit Squid auf
und konfiguriere diesen dann entsprechend. Die VM ist über eine Netzwerkbrücke
in meinen Desktop eingebunden.</p>

<!-- more -->


<h2>Zusatzpakete installieren</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install squid
</span><span class='line'>sudo apt-get install apache2-utils</span></code></pre></td></tr></table></div></figure>


<h2>Squid konfigurieren</h2>

<h3>/etc/squid3/squid.conf</h3>

<figure class='code'><figcaption><span>Änderungen an ./etc/squid3/squid.conf </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gd">--- squid.conf.orig 2013-09-21 13:46:51.000000000 +0200</span>
</span><span class='line'><span class="gi">+++ squid.conf   2013-09-21 13:50:29.000000000 +0200</span>
</span><span class='line'><span class="gu">@@ -334,10 +334,10 @@</span>
</span><span class='line'> ##auth_param digest nonce_max_duration 30 minutes
</span><span class='line'> ##auth_param digest nonce_max_count 50
</span><span class='line'> ##
</span><span class='line'><span class="gd">-##auth_param basic program &lt;uncomment and complete this line&gt;</span>
</span><span class='line'><span class="gd">-##auth_param basic children 5</span>
</span><span class='line'><span class="gd">-##auth_param basic realm Squid proxy-caching web server</span>
</span><span class='line'><span class="gd">-##auth_param basic credentialsttl 2 hours</span>
</span><span class='line'><span class="gi">+auth_param basic program /usr/lib/squid3/ncsa_auth /etc/squid3/squid_user</span>
</span><span class='line'><span class="gi">+auth_param basic children 5</span>
</span><span class='line'><span class="gi">+auth_param basic realm Squid proxy-caching web server</span>
</span><span class='line'><span class="gi">+auth_param basic credentialsttl 2 hours</span>
</span><span class='line'> #Default:
</span><span class='line'> # none
</span><span class='line'>
</span><span class='line'><span class="gu">@@ -687,6 +687,8 @@</span>
</span><span class='line'> #
</span><span class='line'> #Default:
</span><span class='line'> # acl all src all
</span><span class='line'><span class="gi">+acl uli proxy_auth REQUIRED</span>
</span><span class='line'><span class="gi">+http_access allow uli</span>
</span><span class='line'> #
</span><span class='line'> #
</span><span class='line'> # Recommended minimum configuration:
</span></code></pre></td></tr></table></div></figure>


<h3>Benutzer-Listen-Datei anlegen</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo touch /etc/squid3/squid_user</span></code></pre></td></tr></table></div></figure>


<h3>Benutzer samt Kennwort anlegen</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo htpasswd /etc/squid3/squid_user uli
</span><span class='line'>New password: xxxxxx
</span><span class='line'>Re-type new password: xxxxxx
</span><span class='line'>Adding password for user uli</span></code></pre></td></tr></table></div></figure>


<h2>Squid neu starten</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo /etc/init.d/squid3 restart</span></code></pre></td></tr></table></div></figure>


<h2>Proxy-Server verwenden</h2>

<p>Mit den obigen Vorbereitungen kann ich den neuen Proxy-Server nun
mittels <a href="http://{hostname-der-vm}:3128">http://{hostname-der-vm}:3128</a> ansprechen.</p>

<h2>Effektive Konfigurationsdatei ermitteln</h2>

<p>Mit diesen Befehlen kann die effektive Konfigurationsdatei ermittelt
werden. Die vielen Kommentare werden dabei ausgefiltert:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>grep -v "^\s*#" /etc/squid3/squid.conf|grep -v "^\s*$"</span></code></pre></td></tr></table></div></figure>


<p>Die effektive Squid-Konfiguration sieht ohne Kommentare dann so aus:</p>

<figure class='code'><figcaption><span>./etc/squid3/squid.conf ohne Kommentare </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'>auth_param basic program /usr/lib/squid3/ncsa_auth /etc/squid3/squid_user
</span><span class='line'>auth_param basic children 5
</span><span class='line'>auth_param basic realm Squid proxy-caching web server
</span><span class='line'>auth_param basic credentialsttl 2 hours
</span><span class='line'>acl uli proxy_auth REQUIRED
</span><span class='line'>http_access allow uli
</span><span class='line'>acl manager proto cache_object
</span><span class='line'>acl localhost src 127.0.0.1/32 ::1
</span><span class='line'>acl to_localhost dst 127.0.0.0/8 0.0.0.0/32 ::1
</span><span class='line'>acl SSL_ports port 443
</span><span class='line'>acl Safe_ports port 80        # http
</span><span class='line'>acl Safe_ports port 21        # ftp
</span><span class='line'>acl Safe_ports port 443       # https
</span><span class='line'>acl Safe_ports port 70        # gopher
</span><span class='line'>acl Safe_ports port 210       # wais
</span><span class='line'>acl Safe_ports port 1025-65535    # unregistered ports
</span><span class='line'>acl Safe_ports port 280       # http-mgmt
</span><span class='line'>acl Safe_ports port 488       # gss-http
</span><span class='line'>acl Safe_ports port 591       # filemaker
</span><span class='line'>acl Safe_ports port 777       # multiling http
</span><span class='line'>acl CONNECT method CONNECT
</span><span class='line'>http_access allow manager localhost
</span><span class='line'>http_access deny manager
</span><span class='line'>http_access deny !Safe_ports
</span><span class='line'>http_access deny CONNECT !SSL_ports
</span><span class='line'>http_access allow localhost
</span><span class='line'>http_access deny all
</span><span class='line'>http_port 3128
</span><span class='line'>coredump_dir /var/spool/squid3
</span><span class='line'>refresh_pattern ^ftp:     1440    20% 10080
</span><span class='line'>refresh_pattern ^gopher:  1440    0%  1440
</span><span class='line'>refresh_pattern -i (/cgi-bin/|\?) 0   0%  0
</span><span class='line'>refresh_pattern (Release|Packages(.gz)*)$      0       20%     2880
</span><span class='line'>refresh_pattern .     0   20% 4320
</span></code></pre></td></tr></table></div></figure>


<h2>Änderungen</h2>

<ul>
<li>2013-10-06: Komplette Konfigurationsdatei ohne Kommentare hinzugefügt</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[GitHub-Projekt spalten am Beispiel Moxie]]></title>
    <link href="http://uli-heller.github.com/blog/2013/09/13/git-fork/"/>
    <updated>2013-09-13T07:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/09/13/git-fork</id>
    <content type="html"><![CDATA[<p>Im <a href="http://uli-heller.github.com/blog/2013/07/21/git-fork">diesem Artikel</a> hab&#8217; ich erstmals kurz zusammengefasst,
wie ich mit Forks von GitHub arbeite. Hier folgen nun mehr Details am konkreten Beispiel
&ldquo;moxie&rdquo;.</p>

<!-- more -->


<h2>GitHub-Projekt spalten (fork)</h2>

<ul>
<li>GitHub-Projekt im Browser öffnen: <a href="https://github.com/gitblit/moxie">https://github.com/gitblit/moxie</a></li>
<li>Auf der Projektseite wird auch die Clone-Url-O angezeigt, hier: <a href="https://github.com/gitblit/moxie.git">https://github.com/gitblit/moxie.git</a></li>
<li><p>Auf der Projektseite den Knopf &ldquo;Fork&rdquo; anwählen:</p>

<p><img src="http://uli-heller.github.com/images/git/github-fork.png" alt="GitHub-Fork" /></p></li>
<li><p>Folgeseiten &ldquo;durchklicken&rdquo;</p></li>
<li>Schlußendlich landet man auf dem abgespaltenen Projekt, bei mir ist das die Browser-Url
<a href="https://github.com/uli-heller/moxie">https://github.com/uli-heller/moxie</a></li>
<li>Auf der Projektseite wird auch die Clone-Url-S angezeigt, bei mir: git@github.com:uli-heller/moxie.git</li>
</ul>


<h2>Lokalen Kopie anlegen (clone)</h2>

<p>Gespaltenes Projekt kopieren mit: <code>git clone &lt;clone-url-s&gt;</code>, also
im konkreten Fall <code>git clone git@github.com:uli-heller/moxie.git</code>:</p>

<figure class='code'><figcaption><span>Lokale Kopie anlegen </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>~/git$ git clone git@github.com:uli-heller/moxie.git
</span><span class='line'>Klone nach 'moxie'...
</span><span class='line'>remote: Counting objects: 11313, done.
</span><span class='line'>remote: Compressing objects: 100% (2961/2961), done.
</span><span class='line'>remote: Total 11313 (delta 6316), reused 11137 (delta 6140)
</span><span class='line'>Empfange Objekte: 100% (11313/11313), 71.63 MiB | 1.60 MiB/s, done.
</span><span class='line'>Löse Unterschiede auf: 100% (6316/6316), done.
</span><span class='line'>Prüfe Konnektivität... Fertig</span></code></pre></td></tr></table></div></figure>


<h2>Original-Projekt einbinden (upstream)</h2>

<figure class='code'><figcaption><span>Original-Projekt einbinden </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>~/git$ cd moxie
</span><span class='line'>~/git/moxie$ git remote add upstream 
</span><span class='line'>~/git/moxie$ git fetch upstream
</span><span class='line'>Von https://github.com/gitblit/moxie
</span><span class='line'> * [neuer Branch]    gh-pages   -> upstream/gh-pages
</span><span class='line'> * [neuer Branch]    master     -> upstream/master</span></code></pre></td></tr></table></div></figure>


<h2>Kopie des Original-Projektes aktualisieren</h2>

<figure class='code'><figcaption><span>Original-Projekt aktualisieren </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>~/git/moxie$ git fetch upstream 
</span><span class='line'>remote: Counting objects: 1, done.
</span><span class='line'>remote: Total 1 (delta 0), reused 1 (delta 0)
</span><span class='line'>Unpacking objects: 100% (1/1), done.
</span><span class='line'>Von https://github.com/gitblit/moxie
</span><span class='line'>   e1c5785..a13973e  master     -> upstream/master</span></code></pre></td></tr></table></div></figure>


<h2>Änderungen des Original-Projektes einarbeiten</h2>

<p>Gelegentlich will man die Änderungen des Original-Projektes
in das abgespaltete Projekt einarbeiten. Vor der Einarbeitung
muß die Kopie des Original-Projektes aktualisiert worden sein
(<code>git fetch upstream</code>).</p>

<h3>Nur eigene Pull-Requests</h3>

<p>Hier der Ablauf, wenn am Original-Projekt zwischenzeitlich
nur eigene Pull-Requests eingearbeitet wurden. Die Aktualisierung
läuft in diesem Falle völlig schmerzfrei!</p>

<figure class='code'><figcaption><span>Original-Projekt einarbeiten </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>~/git/moxie$ git checkout master
</span><span class='line'>Gewechselt zu Branch 'master'
</span><span class='line'>~/git/moxie$ git merge --no-commit upstream/master
</span><span class='line'>Aktualisiere 34b618c..a13973e
</span><span class='line'>Fast-forward
</span><span class='line'>~/git/moxie$ git status
</span><span class='line'># Auf Branch master
</span><span class='line'>nichts zu committen, Arbeitsverzeichnis unverändert</span></code></pre></td></tr></table></div></figure>


<h3>Konflikte</h3>

<p>Wenn am Original-Projekt zwischenzeitlich auch andere Änderungen
gemacht wurden, so kommt es gelegentlich zu Konflikten beim
Einarbeiten. Die Konflikte können mit <code>git mergetool</code> aufgelöst
werden. Wichtig: Vor dem abschließenden <code>git commit</code> sollte
der neue Stand ausführlich getestet werden!</p>

<figure class='code'><figcaption><span>Original-Projekt einarbeiten </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>~/git/moxie$ git checkout master
</span><span class='line'>Gewechselt zu Branch 'master'
</span><span class='line'>~/git/moxie$ git merge --no-commit upstream/master
</span><span class='line'>## Hier muß ich noch die "richtigen" Meldungen einpflegen
</span><span class='line'>automatischer Merge von Rakefile
</span><span class='line'>automatischer Merge von Gemfile.lock
</span><span class='line'>automatischer Merge von Gemfile
</span><span class='line'>automatischer Merge von .ruby-version
</span><span class='line'>KONFLIKT (hinzufügen/hinzufügen): Merge-Konflikt in .ruby-version
</span><span class='line'>Entferne .rbenv-version
</span><span class='line'>Automatischer Merge fehlgeschlagen; beheben Sie die Konflikte und committen Sie dann das Ergebnis.
</span><span class='line'>~/git/moxie$ git mergetool
</span><span class='line'>## Hier muß ich noch die "richtigen" Meldungen einpflegen
</span><span class='line'>This message is displayed because 'merge.tool' is not configured.
</span><span class='line'>See 'git mergetool --tool-help' or 'git help config' for more details.
</span><span class='line'>'git mergetool' will now attempt to use one of the following tools:
</span><span class='line'>meld opendiff kdiff3 tkdiff xxdiff tortoisemerge gvimdiff diffuse ecmerge p4merge araxis bc3 codecompare emerge vimdiff
</span><span class='line'>Merging:
</span><span class='line'>.ruby-version
</span><span class='line'>
</span><span class='line'>Normal merge conflict for '.ruby-version':
</span><span class='line'>  {local}: created file
</span><span class='line'>  {remote}: created file
</span><span class='line'>Hit return to start merge resolution tool (meld): meld
</span><span class='line'>~/git/moxie$ git commit -m "Merged..."</span></code></pre></td></tr></table></div></figure>


<h2>Links</h2>

<ul>
<li>GitHub-Artikel: <a href="https://help.github.com/articles/fork-a-repo">https://help.github.com/articles/fork-a-repo</a>.</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[SMTP ohne SMTP-Daemon]]></title>
    <link href="http://uli-heller.github.com/blog/2013/09/11/smtp-relay/"/>
    <updated>2013-09-11T08:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/09/11/smtp-relay</id>
    <content type="html"><![CDATA[<p>Bei einem Kunden setze ich <a href="http://redmine.org">Redmine</a> ein.
Es läuft dort auf meinem Klapprechner in einer lokalen VM.
Die Kunden-Infrastruktur &ldquo;kennt&rdquo; diese VM nicht.
Dennoch soll Redmine Email-Benachrichtigungen verschicken.
Mit den üblichen Mechanismen geht das nicht, weil die VM nicht
als &ldquo;sende-berechtigt&rdquo; vermerkt ist. Aber ich habe ja einen SSH-Login
auf einen Rechner, der Emails versenden kann. Hier die Beschreibung,
wie man Redmine (&hellip; oder auf fast jede andere Applikation) dazu bringt,
die Mails über diesen Zwischenrechner zu versenden.</p>

<!-- more -->


<h2>Aktionen innerhalb der Redmine-VM</h2>

<h3>SSH-Schlüssel für den Email-Versand erzeugen</h3>

<h3>XINETD installieren</h3>

<h3>XINETD konfigurieren</h3>

<figure class='code'><figcaption><span>./etc/xinet.d/smtp </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='d'><span class='line'><span class="n">service</span> <span class="n">smtp</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>        <span class="n">socket_type</span>     <span class="p">=</span> <span class="n">stream</span>
</span><span class='line'>        <span class="n">protocol</span>        <span class="p">=</span> <span class="n">tcp</span>
</span><span class='line'>        <span class="n">wait</span>            <span class="p">=</span> <span class="n">no</span>
</span><span class='line'>        <span class="n">user</span>            <span class="p">=</span> <span class="n">root</span>
</span><span class='line'>        <span class="n">disable</span>         <span class="p">=</span> <span class="n">no</span>
</span><span class='line'>        <span class="n">server</span>          <span class="p">=</span> <span class="p">/</span><span class="n">usr</span><span class="p">/</span><span class="n">bin</span><span class="p">/</span><span class="n">ssh</span>
</span><span class='line'>        <span class="n">server_args</span>     <span class="p">=</span> <span class="p">-</span><span class="n">q</span> <span class="p">-</span><span class="n">T</span> <span class="p">-</span><span class="n">i</span> <span class="p">/</span><span class="n">root</span><span class="p">/.</span><span class="n">ssh</span><span class="p">/</span><span class="n">tunnel_key</span> <span class="p">{</span><span class="n">user</span><span class="p">}</span><span class="err">@</span><span class="p">{</span><span class="n">email</span><span class="p">-</span><span class="n">server</span><span class="p">}</span>
</span><span class='line'>        <span class="n">groups</span>          <span class="p">=</span> <span class="n">yes</span>
</span><span class='line'>        <span class="n">bind</span>            <span class="p">=</span> <span class="mf">127.0.0.1</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Hierbei müssen diese Ersetzungen vorgenommen werden:</p>

<ul>
<li>{user}</li>
<li>{email-server}</li>
</ul>


<h2>Aktionen auf dem Email-Server</h2>

<h3>Sicherstellen: netcat ist verfügbar</h3>

<h3>SSH-Schlüssel eintragen</h3>

<figure class='code'><figcaption><span>.ssh/authorized_keys </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>command="netcat -w 1 localhost smtp",no-X11-forwarding,no-agent-forwarding,no-port-forwarding ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDT+uY0OTjsDDnJFxVVapm+w2Sc4NdJU5cQC/KFqSQ0RplDy4vvtBFSjY4ucGErQxEjpeQj2mr1KV0abpnWMZU9HpBzEA2qGObmjSKvLeceVXWoqHjOCzSywmiA18XJ2/pjKz4cCD/DV2QAO32zWRfWhXCU2XlU+dZJa8kDqwL9VS3/Isg5PNr7f9l026vTcdg3zaT0J8M1N3Ag7jILBbZD2JeeXTINqKXn3QEm/IqicLZnDHumzgMHNnurtsbCsmmDS4BySLQxISOOLnb5s7TsdAKwRWnz5uw7JxRlXHPh1t+lgkr5Qcf8LLU2Hqa5Vik11Xm41yJ9c9l2LcaB98CF</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Linux-Podcasts]]></title>
    <link href="http://uli-heller.github.com/blog/2013/09/10/linux-podcasts/"/>
    <updated>2013-09-10T05:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/09/10/linux-podcasts</id>
    <content type="html"><![CDATA[<p>Hier einige Verweise auf Linux-Podcasts.</p>

<!-- more -->


<h2>9 Linux-Podcasts, die man hören sollte</h2>

<p><a href="http://www.networkworld.com/community/blog/9-linux-podcasts-you-should-follow">http://www.networkworld.com/community/blog/9-linux-podcasts-you-should-follow</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Themenwolke für Octopress]]></title>
    <link href="http://uli-heller.github.com/blog/2013/09/08/octopress-themen/"/>
    <updated>2013-09-08T10:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/09/08/octopress-themen</id>
    <content type="html"><![CDATA[<p>Gestern bin ich über <a href="http://www.ewal.net/2012/09/08/octopress-customizations/">http://www.ewal.net/2012/09/08/octopress-customizations/</a>
gestolpert. Darin wird beschrieben, wie man eine Themenwolke in Octopress
einbindet. Eine Themenwolke sieht in etwa so aus:</p>

<p><img src="http://uli-heller.github.com/images/octopress/themenwolke3.png" alt="Themenwolke" /></p>

<p>In diesem Artikel beschreibe ich, wie ich die Themenwolke eingerichtet habe.</p>

<!-- more -->


<h2>octopress-category-list-master-20130907.zip</h2>

<p>Herunterladen von <a href="https://github.com/alswl/octopress-category-list">GitHub</a>
&ndash; <a href="https://github.com/alswl/octopress-category-list/archive/master.zip">ZIP-Datei</a>, meine Kopie liegt <a href="http://uli-heller.github.com/downloads/code/category-list/octopress-category-list-master-20130907.zip">hier</a>.</p>

<figure class='code'><figcaption><span>Einspielen von octopress-category-list </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ unzip -qqd /tmp octopress-category-list-master-20130907.zip
</span><span class='line'>$ cp /tmp/octopress-category-list-master/source/_includes/custom/asides/category* source/_includes/custom/asides/
</span><span class='line'>$ cp /tmp/octopress-category-list-master/plugins/category* plugins/</span></code></pre></td></tr></table></div></figure>


<h2>_config.yml</h2>

<p>In der Konfigurationsdatei von Octopress müssen diese Änderungen
durchgeführt werden:</p>

<ul>
<li>default_asides: Erweitern um &ldquo;custom/asides/category_cloud.html&rdquo;</li>
<li>category_title_prefix: Setzen auf &lsquo;Thema: &rsquo;</li>
</ul>


<figure class='code'><figcaption><span>_config.yml </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gh">diff --git a/_config.yml b/_config.yml</span>
</span><span class='line'><span class="gh">index 7371444..47760b3 100644</span>
</span><span class='line'><span class="gd">--- a/_config.yml</span>
</span><span class='line'><span class="gi">+++ b/_config.yml</span>
</span><span class='line'><span class="gu">@@ -52,7 +52,7 @@ titlecase: false       # Converts page and post titles to titlecase</span>
</span><span class='line'>
</span><span class='line'> # list each of the sidebar modules you want to include, in the order you want them to appear.
</span><span class='line'> # To add custom asides, create files in /source/_includes/custom/asides/ and add them to the list like &#39;custom/asides/custom_aside_name.html&#39;
</span><span class='line'><span class="gd">-default_asides: [asides/recent_posts.html, asides/github.html, asides/delicious.html, asides/pinboard.html, asides/googleplus.html]</span>
</span><span class='line'><span class="gi">+default_asides: [asides/recent_posts.html, custom/asides/category_cloud.html, asides/github.html, asides/delicious.html, asides/pinboard.html, asides/googleplus.html]</span>
</span><span class='line'>
</span><span class='line'> # Each layout uses the default asides, but they can have their own asides instead. Simply uncomment the lines below
</span><span class='line'> # and add an array with the asides you want to use.
</span><span class='line'><span class="gu">@@ -100,3 +100,7 @@ google_analytics_tracking_id:</span>
</span><span class='line'>
</span><span class='line'> # Facebook Like
</span><span class='line'> facebook_like: false
</span><span class='line'><span class="gi">+</span>
</span><span class='line'><span class="gi">+# Category plugin</span>
</span><span class='line'><span class="gi">+category_title_prefix: &#39;Thema: &#39;</span>
</span><span class='line'><span class="gi">+</span>
</span></code></pre></td></tr></table></div></figure>


<h2>source/categories/index.html</h2>

<p>Die Datei &ldquo;source/categories/index.html&rdquo; wird angelegt, um eine separate
Seite mit allen Themen zur Verfügung zu haben. Bei meiner Variante wird oben
die Themenwolke angezeigt, unten eine alphabetisch sortierte Themenliste.</p>

<figure class='code'><figcaption><span>source/categories/index.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>---
</span><span class='line'>layout: page
</span><span class='line'>title: Themen
</span><span class='line'>footer: true
</span><span class='line'>body_id: categories
</span><span class='line'>date: 2013-09-07 09:15
</span><span class='line'>---
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;div&gt;</span>
</span><span class='line'>  <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;tag-cloud&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/blog&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 104.6875%&#39;</span><span class="nt">&gt;</span>Blog<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/centos&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 102.8125%&#39;</span><span class="nt">&gt;</span>CentOS<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/chrome&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 101.875%&#39;</span><span class="nt">&gt;</span>Chrome<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/cinnamon&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>Cinnamon<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/debian&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 101.875%&#39;</span><span class="nt">&gt;</span>Debian<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/dovecot&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 101.875%&#39;</span><span class="nt">&gt;</span>Dovecot<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/eclipse&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 101.875%&#39;</span><span class="nt">&gt;</span>Eclipse<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/fotorama&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 101.875%&#39;</span><span class="nt">&gt;</span>Fotorama<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/git&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 106.5625%&#39;</span><span class="nt">&gt;</span>Git<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/github&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>GitHub<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/gpg&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>GPG<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/gradle&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>Gradle<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/groovy&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>Groovy<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/grub&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>Grub<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/https&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>HTTPS<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/java&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 105.625%&#39;</span><span class="nt">&gt;</span>Java<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/jboss&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>JBoss<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/jdk&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>JDK<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/jmx&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>JMX<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/kepler&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>Kepler<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/kernel&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 101.875%&#39;</span><span class="nt">&gt;</span>Kernel<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/ldap&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>LDAP<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/linux&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 160.0%&#39;</span><span class="nt">&gt;</span>Linux<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/lucid&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 103.75%&#39;</span><span class="nt">&gt;</span>Lucid<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/lxc&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>LXC<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/lxc&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 105.625%&#39;</span><span class="nt">&gt;</span>Lxc<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/macbook-air&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 101.875%&#39;</span><span class="nt">&gt;</span>Macbook Air<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/macbook-air-2013&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>Macbook Air 2013<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/markdown&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 102.8125%&#39;</span><span class="nt">&gt;</span>Markdown<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/mysql&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>MySQL<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/octopress&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 109.375%&#39;</span><span class="nt">&gt;</span>Octopress<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/openvpn&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>OpenVPN<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/packaging&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 106.5625%&#39;</span><span class="nt">&gt;</span>Packaging<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/pakete&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>Pakete<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/passenger&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>Passenger<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/pdf&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>PDF<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/perl&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>Perl<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/pgp&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>PGP<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/pigdeonhole&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 101.875%&#39;</span><span class="nt">&gt;</span>Pigdeonhole<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/podcast&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>Podcast<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/precise&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 130.9375%&#39;</span><span class="nt">&gt;</span>Precise<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/proxy&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 101.875%&#39;</span><span class="nt">&gt;</span>Proxy<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/quilt&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 101.875%&#39;</span><span class="nt">&gt;</span>Quilt<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/raring&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 101.875%&#39;</span><span class="nt">&gt;</span>Raring<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/redmine&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 102.8125%&#39;</span><span class="nt">&gt;</span>Redmine<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/ruby&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 106.5625%&#39;</span><span class="nt">&gt;</span>Ruby<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/server&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>Server<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/shell&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>Shell<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/smtp&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>SMTP<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/squid&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>Squid<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/subversion&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 102.8125%&#39;</span><span class="nt">&gt;</span>Subversion<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/thunderbird&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>Thunderbird<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/truecrypt&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>Truecrypt<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/ubuntu&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 149.6875%&#39;</span><span class="nt">&gt;</span>Ubuntu<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/usb&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>USB<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/webservice&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>Webservice<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/windows&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>Windows<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/zertifikat&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 100.9375%&#39;</span><span class="nt">&gt;</span>Zertifikat<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/zfs&#39;</span> <span class="na">style=</span><span class="s">&#39;font-size: 101.875%&#39;</span><span class="nt">&gt;</span>ZFS<span class="nt">&lt;/a&gt;</span> <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>  <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;category-list&quot;</span><span class="nt">&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/blog&#39;</span><span class="nt">&gt;</span>Blog (5)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/centos&#39;</span><span class="nt">&gt;</span>CentOS (3)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/chrome&#39;</span><span class="nt">&gt;</span>Chrome (2)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/cinnamon&#39;</span><span class="nt">&gt;</span>Cinnamon (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/debian&#39;</span><span class="nt">&gt;</span>Debian (2)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/dovecot&#39;</span><span class="nt">&gt;</span>Dovecot (2)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/eclipse&#39;</span><span class="nt">&gt;</span>Eclipse (2)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/fotorama&#39;</span><span class="nt">&gt;</span>Fotorama (2)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/git&#39;</span><span class="nt">&gt;</span>Git (7)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/github&#39;</span><span class="nt">&gt;</span>GitHub (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/gpg&#39;</span><span class="nt">&gt;</span>GPG (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/gradle&#39;</span><span class="nt">&gt;</span>Gradle (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/groovy&#39;</span><span class="nt">&gt;</span>Groovy (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/grub&#39;</span><span class="nt">&gt;</span>Grub (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/https&#39;</span><span class="nt">&gt;</span>HTTPS (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/java&#39;</span><span class="nt">&gt;</span>Java (6)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/jboss&#39;</span><span class="nt">&gt;</span>JBoss (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/jdk&#39;</span><span class="nt">&gt;</span>JDK (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/jmx&#39;</span><span class="nt">&gt;</span>JMX (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/kepler&#39;</span><span class="nt">&gt;</span>Kepler (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/kernel&#39;</span><span class="nt">&gt;</span>Kernel (2)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/ldap&#39;</span><span class="nt">&gt;</span>LDAP (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/linux&#39;</span><span class="nt">&gt;</span>Linux (64)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/lucid&#39;</span><span class="nt">&gt;</span>Lucid (4)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/lxc&#39;</span><span class="nt">&gt;</span>LXC (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/lxc&#39;</span><span class="nt">&gt;</span>Lxc (6)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/macbook-air&#39;</span><span class="nt">&gt;</span>Macbook Air (2)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/macbook-air-2013&#39;</span><span class="nt">&gt;</span>Macbook Air 2013 (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/markdown&#39;</span><span class="nt">&gt;</span>Markdown (3)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/mysql&#39;</span><span class="nt">&gt;</span>MySQL (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/octopress&#39;</span><span class="nt">&gt;</span>Octopress (10)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/openvpn&#39;</span><span class="nt">&gt;</span>OpenVPN (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/packaging&#39;</span><span class="nt">&gt;</span>Packaging (7)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/pakete&#39;</span><span class="nt">&gt;</span>Pakete (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/passenger&#39;</span><span class="nt">&gt;</span>Passenger (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/pdf&#39;</span><span class="nt">&gt;</span>PDF (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/perl&#39;</span><span class="nt">&gt;</span>Perl (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/pgp&#39;</span><span class="nt">&gt;</span>PGP (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/pigdeonhole&#39;</span><span class="nt">&gt;</span>Pigdeonhole (2)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/podcast&#39;</span><span class="nt">&gt;</span>Podcast (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/precise&#39;</span><span class="nt">&gt;</span>Precise (33)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/proxy&#39;</span><span class="nt">&gt;</span>Proxy (2)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/quilt&#39;</span><span class="nt">&gt;</span>Quilt (2)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/raring&#39;</span><span class="nt">&gt;</span>Raring (2)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/redmine&#39;</span><span class="nt">&gt;</span>Redmine (3)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/ruby&#39;</span><span class="nt">&gt;</span>Ruby (7)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/server&#39;</span><span class="nt">&gt;</span>Server (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/shell&#39;</span><span class="nt">&gt;</span>Shell (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/smtp&#39;</span><span class="nt">&gt;</span>SMTP (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/squid&#39;</span><span class="nt">&gt;</span>Squid (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/subversion&#39;</span><span class="nt">&gt;</span>Subversion (3)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/thunderbird&#39;</span><span class="nt">&gt;</span>Thunderbird (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/truecrypt&#39;</span><span class="nt">&gt;</span>Truecrypt (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/ubuntu&#39;</span><span class="nt">&gt;</span>Ubuntu (53)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/usb&#39;</span><span class="nt">&gt;</span>USB (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/webservice&#39;</span><span class="nt">&gt;</span>Webservice (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/windows&#39;</span><span class="nt">&gt;</span>Windows (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/zertifikat&#39;</span><span class="nt">&gt;</span>Zertifikat (1)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&#39;/blog/categories/zfs&#39;</span><span class="nt">&gt;</span>ZFS (2)<span class="nt">&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>source/_includes/custom/navigation.html</h2>

<p>Die Themenseite wird durch Änderung an &ldquo;source/_includes/custom/navigation.html&rdquo;
in die Navigation eingebunden:</p>

<figure class='code'><figcaption><span>Änderungen an source/_includes/custom/navigation.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gh">diff --git a/source/_includes/custom/navigation.html b/source/_includes/custom/n</span>
</span><span class='line'><span class="gh">index 0ec1963..a7592a0 100644</span>
</span><span class='line'><span class="gd">--- a/source/_includes/custom/navigation.html</span>
</span><span class='line'><span class="gi">+++ b/source/_includes/custom/navigation.html</span>
</span><span class='line'><span class="gu">@@ -1,6 +1,7 @@</span>
</span><span class='line'> &lt;ul class=&quot;main-navigation&quot;&gt;
</span><span class='line'>   &lt;li&gt;&lt;a href=&quot;/&quot;&gt;Blog&lt;/a&gt;&lt;/li&gt;
</span><span class='line'>   &lt;li&gt;&lt;a href=&quot;/archives/&quot;&gt;Archiv&lt;/a&gt;&lt;/li&gt;
</span><span class='line'><span class="gi">+  &lt;li&gt;&lt;a href=&quot;/categories/&quot;&gt;Themen&lt;/a&gt;&lt;/li&gt;</span>
</span><span class='line'>   &lt;li&gt;&lt;a href=&quot;/about/&quot;&gt;Über mich&lt;/a&gt;&lt;/li&gt;
</span><span class='line'>   &lt;li&gt;&lt;a href=&quot;/impressum/&quot;&gt;Impressum&lt;/a&gt;&lt;/li&gt;
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Statische Fotogallerie für Octopress]]></title>
    <link href="http://uli-heller.github.com/blog/2013/09/07/gallery/"/>
    <updated>2013-09-07T09:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/09/07/gallery</id>
    <content type="html"><![CDATA[<p>In <a href="http://uli-heller.github.com/blog/2013/08/04/gallery">/blog/2013/08/04/gallery</a> habe ich beschrieben, wie ich meine Fotogallerie
in Octopress einbinde. Leider zeigt sich, dass der dort verwendete Ansatz
den ganzen Generierungsprozess ziemlich stark ausbremst.</p>

<p>Ziel dieses Artikels ist die Beschleunigung des Generierungsprozesses.</p>

<!-- more -->


<h2>Problembeschreibung</h2>

<p>Das Plugin <a href="https://github.com/yortz/octopress_gallery">Octopress-Gallery</a>
zur Anzeige der Fotogallerie konvertiert die Bilder automatisch in&rsquo;s
Thumbnail-Format. Es ist zwar ein Algorithmus eingebaut, der die Konvertierung
der Bilder nur dann durchführen soll, wenn sich die Bilder geändert haben &ndash;
er funktioniert aber leider nicht.</p>

<h2>Lösungsansatz</h2>

<ul>
<li>Ich erzeuge ein Skript, welches die Konvertierung vornimmt</li>
<li>Das Skript selbst hat auch eine &ldquo;Änderungserkennung&rdquo;, d.h. es werden
wirklich nur die gänderten Bilder neu konvertiert</li>
<li>Das Skript muß manuell ausgeführt werden</li>
<li>Die konvertierten Bilder liegen im Verzeichnis &ldquo;source&rdquo; und werden
mit in Git gespeichert.</li>
</ul>


<p>Als Konsequenz dieser Änderungen müssen noch:</p>

<ul>
<li>Die Konvertierung von <a href="https://github.com/yortz/octopress_gallery">Octopress-Gallery</a> muß abgeklemmt werden</li>
<li>Skalierte Bilder einbinden in die Gallerie</li>
</ul>


<h2>Umsetzung</h2>

<h3>Konvertierungsskript</h3>

<p>Das Konvertierungsskript befindet sich <a href="https://github.com/uli-heller/uli-octopress/blob/master/create-galleries.sh">auf GitHub</a></p>

<h3>Abklemmen der alten Konvertierung</h3>

<p>Die alte Konvertierung wird abgeklemmt, in dem</p>

<ul>
<li>das MiniMagick-Plugin gelöscht wird</li>
<li>die MiniMagick-Konfiguration entfernt wird</li>
</ul>


<h4>MiniMagick-Plugin löschen</h4>

<figure class='code'><figcaption><span>MiniMagick-Plugin entfernen </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rm -f plugins/mini_magick.rb</span></code></pre></td></tr></table></div></figure>


<h4>MiniMagick-Konfiguration entfernen</h4>

<figure class='code'><figcaption><span>MiniMagick-Konfiguration entfernen </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>diff --git a/_config.yml b/_config.yml
</span><span class='line'>index 33ac290..7371444 100644
</span><span class='line'>--- a/_config.yml
</span><span class='line'>+++ b/_config.yml
</span><span class='line'>@@ -100,23 +100,3 @@ google_analytics_tracking_id:
</span><span class='line'> 
</span><span class='line'> # Facebook Like
</span><span class='line'> facebook_like: false
</span><span class='line'>-
</span><span class='line'>-mini_magick:
</span><span class='line'>-    test_thumbnail:
</span><span class='line'>-      source: images/galleries/test
</span><span class='line'>-      destination: images/galleries/test/thumbs
</span><span class='line'>-      commands:
</span><span class='line'>-        - thumbnail: "64x48^"
</span><span class='line'>-        - crop: "64x48-0x0"
</span><span class='line'>-    centos_thumbnail:
</span><span class='line'>-      source: images/galleries/centos
</span><span class='line'>-      destination: images/galleries/centos/thumbs
</span><span class='line'>-      commands:
</span><span class='line'>-        - thumbnail: "64x48^"
</span><span class='line'>-        - crop: "64x48-0x0"
</span><span class='line'>-    centos59_thumbnail:
</span><span class='line'>-      source: images/galleries/centos59
</span><span class='line'>-      destination: images/galleries/centos59/thumbs
</span><span class='line'>-      commands:
</span><span class='line'>-        - thumbnail: "64x48^"
</span><span class='line'>-        - crop: "64x48-0x0"</span></code></pre></td></tr></table></div></figure>


<h3>Skalierte Bilder einbinden</h3>

<p>Hierzu muß die Datei plugins/gallery_tag.rb angepasst werden.
Wir ändern dies so, dass</p>

<ul>
<li>für die Thumbnails die kleinen Bilder unterhalb von &hellip;/thumbs verwendet werden</li>
<li>für die Standard-Anzeige die mittleren Bilder unterhalb von &hellip;/scaled verwendet werden</li>
<li>für die Großanzeige die originalen Bilder verwendet werden</li>
</ul>


<figure class='code'><figcaption><span>Änderungen an ./plugins/gallery_tag.rb </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gh">diff --git a/plugins/gallery_tag.rb b/plugins/gallery_tag.rb</span>
</span><span class='line'><span class="gh">index 2e09f9b..8be9ff4 100644</span>
</span><span class='line'><span class="gd">--- a/plugins/gallery_tag.rb</span>
</span><span class='line'><span class="gi">+++ b/plugins/gallery_tag.rb</span>
</span><span class='line'><span class="gu">@@ -7,13 +7,13 @@ module ImageList</span>
</span><span class='line'>     list &lt;&lt; %Q{&lt;script src=&quot;/javascripts/fotorama/jquery-1.10.2.min.js&quot;&gt;&lt;/script&gt;}
</span><span class='line'>     list &lt;&lt; %Q{&lt;link href=&quot;/javascripts/fotorama/fotorama.css&quot; rel=&quot;stylesheet&quot;&gt;}
</span><span class='line'>     list &lt;&lt; %Q{&lt;script src=&quot;/javascripts/fotorama/fotorama.js&quot;&gt;&lt;/script&gt;}
</span><span class='line'><span class="gd">-    list &lt;&lt; %Q{&lt;div class=&quot;fotorama&quot; data-autoplay=&quot;3000&quot; data-transition=&quot;dissolve&quot; data-nav=&quot;thumbs&quot; data-allow-full-screen=&quot;true&quot; data-keyboard=&quot;true&quot; data-width=&quot;80%&quot; data-thumb-with=&quot;64&quot; data-thumb-height=&quot;48&quot;&gt;} # data-width=&quot;100%&quot; data-thumb-width= data-thumb-height=</span>
</span><span class='line'><span class="gi">+    list &lt;&lt; %Q{&lt;div class=&quot;fotorama&quot; data-autoplay=&quot;3000&quot; data-transition=&quot;dissolve&quot; data-nav=&quot;thumbs&quot; data-allow-full-screen=&quot;true&quot; data-keyboard=&quot;true&quot; data-width=&quot;640&quot; data-height=&quot;480&quot; data-thumb-with=&quot;64&quot; data-thumb-height=&quot;48&quot;&gt;} # data-width=&quot;100%&quot; data-thumb-width= data-thumb-height=</span>
</span><span class='line'>     dir = Dir.new( File.join(BASE_DIR, name) )
</span><span class='line'>     dir.sort.each do | d |
</span><span class='line'>       image = File.basename(d, File.extname(d))
</span><span class='line'>       unless d =~ /^\./ || d =~ /thumbs/ || d =~ /scaled/ || d =~ /_md5/
</span><span class='line'> #        list &lt;&lt; %Q{&lt;a href=&quot;/images/galleries/#{name}/#{d}&quot; rel=&quot;shadowbox&quot; title=&quot;#{image}&quot;&gt;&lt;img src=&quot;/images/galleries/#{name}/thumbs/#{d}&quot; /&gt;&lt;/a&gt;}
</span><span class='line'><span class="gd">-        list &lt;&lt; %Q{&lt;a href=&quot;/images/galleries/#{name}/scaled/#{d}&quot;&gt;&lt;img src=&quot;/images/galleries/#{name}/thumbs/#{d}&quot;/&gt;&lt;/a&gt;}</span>
</span><span class='line'><span class="gi">+        list &lt;&lt; %Q{&lt;a href=&quot;/images/galleries/#{name}/scaled/#{d}&quot; data-full=&quot;/images/galleries/#{name}/#{d}&quot; data-fit=&quot;scaledown&quot;&gt;&lt;img src=&quot;/images/galleries/#{name}/thumbs/#{d}&quot; data-fit=&quot;scaledown&quot;/&gt;&lt;/a&gt;}</span>
</span><span class='line'>       end
</span><span class='line'>     end
</span><span class='line'>     list &lt;&lt; %Q{&lt;/div&gt; &lt;!--class=&quot;fotorama&quot; data-nav=&quot;thumbs&quot; --&gt;}
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[LXC: Fehler bei 'apt-get upgrade' - udev]]></title>
    <link href="http://uli-heller.github.com/blog/2013/09/03/lxc-apt-upgrade-udev/"/>
    <updated>2013-09-03T08:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/09/03/lxc-apt-upgrade-udev</id>
    <content type="html"><![CDATA[<p>In letzter Zeit tritt ein Problem beim Ausführen
von <code>apt-get upgrade</code> in meinen LXC-Containern auf:</p>

<pre><code>$ sudo apt-get upgrade
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following packages will be upgraded:
  apt apt-utils base-files gnupg gpgv libapt-inst1.4 libapt-pkg4.12 libudev0
  lsb-base lsb-release udev
11 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
Need to get 3752 kB of archives.
After this operation, 25.6 kB of additional disk space will be used.
Do you want to continue [Y/n]? 
...
Preparing to replace udev 175-0ubuntu9.3 (using .../udev_175-0ubuntu9.4_amd64.deb) ...
Adding 'diversion of /sbin/udevadm to /sbin/udevadm.upgrade by fake-udev'
dpkg: unrecoverable fatal error, aborting:
 failed to fstat previous diversions file: No such file or directory
E: Sub-process /usr/bin/dpkg returned an error code (2)
</code></pre>

<p>Ich denke, das Problem hängt zusammen mit der Aktualisierung des
Paketes &ldquo;udev&rdquo;.</p>

<p>Zur Korrektur des Problems muß ich mehrfach diese Kommandos ausführen:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo dpkg --configure -a
</span><span class='line'>$ sudo apt-get upgrade</span></code></pre></td></tr></table></div></figure>


<p>Nach zwei bis drei Durchläufen ist das Problem verschwunden.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Experimente mit CentOS-5.9]]></title>
    <link href="http://uli-heller.github.com/blog/2013/08/16/centos59/"/>
    <updated>2013-08-16T08:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/08/16/centos59</id>
    <content type="html"><![CDATA[<p>Heute habe ich mir vorgenommen, ein paar Experimente mit CentOS-5.9
durchzuführen. CentOS ist eine Linux-Distribution, die den Anspruch
hat, weitgehend kompatibel zu RedHat Enterprise Linux (RHEL) ist.
Meine Hoffnung ist, dass sich die Erkenntnisse, die ich heute sammle,
auch in einem anstehenden Kundenprojekt anwenden lassen, bei dem RHEL
zum Einsatz kommen wird.</p>

<!-- more -->


<h2>VirtualBox</h2>

<p>Bei der Installation als Gastsystem innerhalb von VirtualBox
sind folgende Besonderheiten zu beachten:</p>

<ul>
<li><p>Bei &ldquo;System&rdquo; muß folgendes aktiviert werden:</p>

<ul>
<li>Chipsatz: ICH9</li>
<li>IO-APIC aktivieren</li>
</ul>


<p>Mit anderen Einstellungen blieb bei mir das Gastsystem immer hängen</p></li>
<li><p>Für den Massenspeicher sollte nur ein IDE-Controller verwendet werden</p>

<p>Bei mir blieb das Gastsystem immer hängen, wenn ich einen SATA-Controller verwendet habe</p></li>
</ul>


<h2>Grundinstallation</h2>

<script src="http://uli-heller.github.com/javascripts/fotorama/jquery-1.10.2.min.js"></script>


<p><link href="http://uli-heller.github.com/javascripts/fotorama/fotorama.css" rel="stylesheet"><script src="http://uli-heller.github.com/javascripts/fotorama/fotorama.js"></script><div class="fotorama" data-autoplay="3000" data-transition="dissolve" data-nav="thumbs" data-allow-full-screen="true" data-keyboard="true" data-width="640" data-height="480" data-thumb-with="64" data-thumb-height="48"><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/001-create-vm.png" data-full="/images/galleries/centos59/001-create-vm.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/001-create-vm.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/002-memory-size.png" data-full="/images/galleries/centos59/002-memory-size.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/002-memory-size.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/003-harddisk.png" data-full="/images/galleries/centos59/003-harddisk.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/003-harddisk.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/004-harddisk-type.png" data-full="/images/galleries/centos59/004-harddisk-type.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/004-harddisk-type.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/005-harddisk-storage.png" data-full="/images/galleries/centos59/005-harddisk-storage.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/005-harddisk-storage.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/006-harddisk-size.png" data-full="/images/galleries/centos59/006-harddisk-size.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/006-harddisk-size.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/007-vm.png" data-full="/images/galleries/centos59/007-vm.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/007-vm.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/008-vm.png" data-full="/images/galleries/centos59/008-vm.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/008-vm.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/009-settings.png" data-full="/images/galleries/centos59/009-settings.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/009-settings.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/010-settings-2.png" data-full="/images/galleries/centos59/010-settings-2.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/010-settings-2.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/010-settings-3.png" data-full="/images/galleries/centos59/010-settings-3.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/010-settings-3.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/011-vm-2.png" data-full="/images/galleries/centos59/011-vm-2.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/011-vm-2.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/012-boot.png" data-full="/images/galleries/centos59/012-boot.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/012-boot.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/013-boot.png" data-full="/images/galleries/centos59/013-boot.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/013-boot.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/014-boot.png" data-full="/images/galleries/centos59/014-boot.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/014-boot.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/015-boot.png" data-full="/images/galleries/centos59/015-boot.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/015-boot.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/016-skip-test.png" data-full="/images/galleries/centos59/016-skip-test.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/016-skip-test.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/017-anaconda.png" data-full="/images/galleries/centos59/017-anaconda.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/017-anaconda.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/018-welcome.png" data-full="/images/galleries/centos59/018-welcome.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/018-welcome.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/019-english-ok.png" data-full="/images/galleries/centos59/019-english-ok.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/019-english-ok.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/019-english.png" data-full="/images/galleries/centos59/019-english.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/019-english.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/020-keyboard.png" data-full="/images/galleries/centos59/020-keyboard.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/020-keyboard.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/021-harddisk.png" data-full="/images/galleries/centos59/021-harddisk.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/021-harddisk.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/022-harddisk-ok.png" data-full="/images/galleries/centos59/022-harddisk-ok.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/022-harddisk-ok.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/023-harddisk-ok.png" data-full="/images/galleries/centos59/023-harddisk-ok.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/023-harddisk-ok.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/024-partition-no.png" data-full="/images/galleries/centos59/024-partition-no.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/024-partition-no.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/025-network-yes.png" data-full="/images/galleries/centos59/025-network-yes.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/025-network-yes.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/026-eth0.png" data-full="/images/galleries/centos59/026-eth0.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/026-eth0.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/027-eth0-ipv4.png" data-full="/images/galleries/centos59/027-eth0-ipv4.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/027-eth0-ipv4.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/028-eth0-ipv6.png" data-full="/images/galleries/centos59/028-eth0-ipv6.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/028-eth0-ipv6.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/029-hostname.png" data-full="/images/galleries/centos59/029-hostname.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/029-hostname.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/030-timezone.png" data-full="/images/galleries/centos59/030-timezone.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/030-timezone.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/031-password.png" data-full="/images/galleries/centos59/031-password.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/031-password.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/032-packages.png" data-full="/images/galleries/centos59/032-packages.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/032-packages.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/033-dependencies.png" data-full="/images/galleries/centos59/033-dependencies.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/033-dependencies.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/034-begin.png" data-full="/images/galleries/centos59/034-begin.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/034-begin.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/035-formatting.png" data-full="/images/galleries/centos59/035-formatting.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/035-formatting.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/036-completed.png" data-full="/images/galleries/centos59/036-completed.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/036-completed.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/037-rebooting.png" data-full="/images/galleries/centos59/037-rebooting.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/037-rebooting.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/038-booting.png" data-full="/images/galleries/centos59/038-booting.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/038-booting.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/039-booting.png" data-full="/images/galleries/centos59/039-booting.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/039-booting.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/040-booting.png" data-full="/images/galleries/centos59/040-booting.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/040-booting.png" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/centos59/scaled/041-setup.png" data-full="/images/galleries/centos59/041-setup.png" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/centos59/thumbs/041-setup.png" data-fit="scaledown"/></a></div> <!--class="fotorama" data-nav="thumbs" --></p>

<h2>TBC</h2>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Git-Svn: Absturz bei 'dcommit', 'rebase', ...]]></title>
    <link href="http://uli-heller.github.com/blog/2013/08/08/git-svn-absturz/"/>
    <updated>2013-08-08T08:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/08/08/git-svn-absturz</id>
    <content type="html"><![CDATA[<p>Seit der Aktualisierung auf Subversion-1.8.1 gibt es immer wieder
Fehler bei der Ausführung von Git-Svn-Kommandos. Beobachtet habe ich
die Fehler bei</p>

<ul>
<li><code>git svn dcommit</code></li>
<li><code>git svn rebase</code></li>
<li><code>git svn clone</code></li>
</ul>


<p>Der Fehler tritt nur beim &ldquo;Aufräumen&rdquo; auf, d.h. nachdem das betreffende
Kommando abgearbeitet ist und der Git-Svn-Prozess nur noch beendet werden
muß. Er tritt auch nur auf, wenn Daten über die Leitung geschickt werden,
also wenn:</p>

<ul>
<li>das lokale Git-Repo geändert wurde (dcommit)</li>
<li>das Svn-Repository geändert wurde (rebase)</li>
</ul>


<p>Wenn man den Fehler einfach ignoriert, kann man &ldquo;normal&rdquo; weiterarbeiten.</p>

<!-- more -->


<h2>Reproduzieren des Problems</h2>

<p>Am einfachsten läßt sich das Problem reproduzieren, wenn man ein
Subversion-Repository mit Testdaten verfügbar hat. Bei mir hat das den Namen
&ldquo;sandbox&rdquo;.</p>

<p>Ach ja: Das Subversion-Repository muß via &ldquo;<a href="https://...">https://&#8230;</a>&rdquo; angesprochen werden.
Mit einem lokalen Subversion-Repository,
das mittels &ldquo;file://&hellip;&rdquo; angesprochen wird,
tritt das Problem nicht auf!</p>

<figure class='code'><figcaption><span>Clonen des Svn-Repositories </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>~/git<span class="nv">$ </span>git svn clone --stdlayout https://<span class="o">{</span>servername<span class="o">}</span>/<span class="o">{</span>pfad<span class="o">}</span>/sandbox
</span><span class='line'>Initialisierte leeres Git-Projektarchiv in .../git/sandbox/.git/
</span><span class='line'><span class="nv">r1</span> <span class="o">=</span> 7ebd17bca2c5e3ead4816e93371d695eb3e19a36 <span class="o">(</span>refs/remotes/trunk<span class="o">)</span>
</span><span class='line'>  A   bug-fix.ticket18
</span><span class='line'><span class="nv">r2</span> <span class="o">=</span> 77410a5f40f2eaeaf666f9fbda5261a521acb33f <span class="o">(</span>refs/remotes/trunk<span class="o">)</span>
</span><span class='line'>  M   bug-fix.ticket18
</span><span class='line'>...
</span><span class='line'><span class="nv">r81</span> <span class="o">=</span> 32ebfb3669331a5a5b60d27dbf54e0b6c7a601da <span class="o">(</span>refs/remotes/trunk<span class="o">)</span>
</span><span class='line'>Checked out HEAD:
</span><span class='line'>  https://83.236.132.107/svn/sandbox/trunk r81
</span><span class='line'>creating empty directory: baumkonflikt/dir1
</span><span class='line'>creating empty directory: danyi_tests
</span><span class='line'>error: git-svn died of signal 11
</span><span class='line'>~/git<span class="nv">$ </span><span class="nb">cd </span>sandbox
</span></code></pre></td></tr></table></div></figure>


<p>Hierbei tritt der Fehler auf. Der Ablauf ist aber verhältnismässig aufwändig,
weil immer das ganze Repository kopiert wird.</p>

<figure class='code'><figcaption><span>Neue Datei git-svn-absturz.txt </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>~/git/sandbox<span class="nv">$ </span>date &gt;&gt;git-svn-absturz.txt
</span><span class='line'>~/git/sandbox<span class="nv">$ </span>git add git-svn-absturz.txt
</span><span class='line'>~/git/sandbox<span class="nv">$ </span>git commit -m <span class="s2">&quot;Aktualisiert: git-svn-absturz.txt&quot;</span> .
</span><span class='line'><span class="o">[</span>master b984d2a<span class="o">]</span> Aktualisiert: git-svn-absturz.txt
</span><span class='line'> 1 file changed, 1 insertion<span class="o">(</span>+<span class="o">)</span>
</span><span class='line'> create mode 100644 git-svn-absturz.txt
</span><span class='line'>~/git/sandbox<span class="nv">$ </span>git svn dcommit
</span><span class='line'>Committing to https://83.236.132.107/svn/sandbox/trunk ...
</span><span class='line'>  A   git-svn-absturz.txt
</span><span class='line'>Committed r82
</span><span class='line'>  A   git-svn-absturz.txt
</span><span class='line'><span class="nv">r82</span> <span class="o">=</span> 610e72f25af787a95e3d2bc6c243bcdef720c40d <span class="o">(</span>refs/remotes/trunk<span class="o">)</span>
</span><span class='line'>No changes between b984d2a7c45c9b7e94fe5edc3b765b84a3b2ed7d and refs/remotes/trunk
</span><span class='line'>Resetting to the latest refs/remotes/trunk
</span><span class='line'>error: git-svn died of signal 11
</span></code></pre></td></tr></table></div></figure>


<p>Der Fehler ist erneut aufgetreten. Der Ablauf ist auch ungeeignet, weil ich
nicht für jeden Test eine neue Datei anlegen möchte.</p>

<figure class='code'><figcaption><span>Einfache Reproduktion des Problems </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>~/git/sandbox<span class="nv">$ </span>date &gt;&gt;git-svn-absturz.txt
</span><span class='line'>~/git/sandbox<span class="nv">$ </span>git commit -m <span class="s2">&quot;Aktualisiert: git-svn-absturz.txt&quot;</span> .
</span><span class='line'><span class="o">[</span>master 10629a2<span class="o">]</span> Aktualisiert: git-svn-absturz.txt
</span><span class='line'> 1 file changed, 1 insertion<span class="o">(</span>+<span class="o">)</span>
</span><span class='line'>~/git/sandbox<span class="nv">$ </span>git svn dcommit
</span><span class='line'>Committing to https://83.236.132.107/svn/sandbox/trunk ...
</span><span class='line'>  M   git-svn-absturz.txt
</span><span class='line'>Committed r83
</span><span class='line'>  M   git-svn-absturz.txt
</span><span class='line'><span class="nv">r83</span> <span class="o">=</span> 5260be6684059d7b8416c011dfa644d837f317a9 <span class="o">(</span>refs/remotes/trunk<span class="o">)</span>
</span><span class='line'>No changes between 10629a268ed877ba48fa2a70ed387b04bacd18cb and refs/remotes/trunk
</span><span class='line'>Resetting to the latest refs/remotes/trunk
</span><span class='line'>error: git-svn died of signal 11
</span></code></pre></td></tr></table></div></figure>


<p>Der Fehler ist erneut aufgetreten. Der Ablauf ist schnell wiederholt
durchführbar.</p>

<p>Hier nochmal die abzusetzenden Befehle ohne Ausgaben zur einfachen
Wiederholung mit &ldquo;Ausschneiden und Einfügen&rdquo;:</p>

<figure class='code'><figcaption><span>Einfache Reproduktion - abzusetzende Befehle </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>date &gt;&gt;git-svn-absturz.txt
</span><span class='line'>git commit -m <span class="s2">&quot;Aktualisiert: git-svn-absturz.txt&quot;</span> .
</span><span class='line'>git svn dcommit
</span></code></pre></td></tr></table></div></figure>


<h2>Analyse</h2>

<h3>strace</h3>

<figure class='code'><figcaption><span>Reproduktion mit &#8216;strace&#8217; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>date &gt;&gt;git-svn-absturz.txt
</span><span class='line'>git commit -m <span class="s2">&quot;Aktualisiert: git-svn-absturz.txt&quot;</span> .
</span><span class='line'>strace git svn dcommit
</span></code></pre></td></tr></table></div></figure>


<p>Diese Ausgaben werden geliefert:</p>

<figure class='code'><figcaption><span>Ausgabe von &#8216;strace git svn&#8217; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>...
</span><span class='line'>  M   git-svn-absturz.txt
</span><span class='line'>Committed r84
</span><span class='line'>  M   git-svn-absturz.txt
</span><span class='line'><span class="nv">r84</span> <span class="o">=</span> af8102dc59c40c47b56a404b5ceffa7c5892bc06 <span class="o">(</span>refs/remotes/trunk<span class="o">)</span>
</span><span class='line'>No changes between 191f43c2a02d86825f946de62f6fd8f56b5aa74b and refs/remotes/trunk
</span><span class='line'>Resetting to the latest refs/remotes/trunk
</span><span class='line'><span class="o">[{</span>WIFSIGNALED<span class="o">(</span>s<span class="o">)</span> <span class="o">&amp;&amp;</span> WTERMSIG<span class="o">(</span>s<span class="o">)</span> <span class="o">==</span> SIGSEGV <span class="o">&amp;&amp;</span> WCOREDUMP<span class="o">(</span>s<span class="o">)}]</span>, 0, NULL<span class="o">)</span> <span class="o">=</span> 14979
</span><span class='line'>--- SIGCHLD <span class="o">(</span>Child exited<span class="o">)</span> @ 0 <span class="o">(</span>0<span class="o">)</span> ---
</span><span class='line'>write<span class="o">(</span>2, <span class="s2">&quot;error: git-svn died of signal 11&quot;</span>..., 33error: git-svn died of signal 11
</span><span class='line'><span class="o">)</span> <span class="o">=</span> 33
</span><span class='line'>exit_group<span class="o">(</span>139<span class="o">)</span>                         <span class="o">=</span> ?
</span></code></pre></td></tr></table></div></figure>


<p>Dieser Trace hat wenig Aussagekraft, weil einfach nur ein Unterprozess
anstürzt. Nun könnte man den Test nochmals laufen lassen mit &lsquo;strace -F&rsquo;
oder wir füttern &lsquo;strace&rsquo; direkt mit &lsquo;git-svn&rsquo;:</p>

<figure class='code'><figcaption><span>Reproduktion mit &#8216;strace&#8217; und &#8216;git-svn&#8217; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>date &gt;&gt;git-svn-absturz.txt
</span><span class='line'>git commit -m <span class="s2">&quot;Aktualisiert: git-svn-absturz.txt&quot;</span> .
</span><span class='line'>strace /usr/lib/git-core/git-svn dcommit
</span></code></pre></td></tr></table></div></figure>


<p>Dies führt zu folgender Ausgabe:</p>

<figure class='code'><figcaption><span>Ausgabe von &#8216;strace git-svn&#8217; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>execve<span class="o">(</span><span class="s2">&quot;/usr/lib/git-core/git-svn&quot;</span>, <span class="o">[</span><span class="s2">&quot;/usr/lib/git-core/git-svn&quot;</span>, <span class="s2">&quot;dcommit&quot;</span><span class="o">]</span>, <span class="o">[</span>/* 59 vars */<span class="o">])</span> <span class="o">=</span> 0
</span><span class='line'>brk<span class="o">(</span>0<span class="o">)</span>                                  <span class="o">=</span> 0x25fd000
</span><span class='line'>access<span class="o">(</span><span class="s2">&quot;/etc/ld.so.nohwcap&quot;</span>, F_OK<span class="o">)</span>      <span class="o">=</span> -1 ENOENT <span class="o">(</span>No such file or directory<span class="o">)</span>
</span><span class='line'>...
</span><span class='line'>chmod<span class="o">(</span><span class="s2">&quot;.git/Git_zUlsP8&quot;</span>, 0600<span class="o">)</span>          <span class="o">=</span> 0
</span><span class='line'>unlink<span class="o">(</span><span class="s2">&quot;.git/Git_zUlsP8&quot;</span><span class="o">)</span>               <span class="o">=</span> 0
</span><span class='line'>close<span class="o">(</span>14<span class="o">)</span>                               <span class="o">=</span> 0
</span><span class='line'>close<span class="o">(</span>4294967295<span class="o">)</span>                       <span class="o">=</span> -1 EBADF <span class="o">(</span>Bad file descriptor<span class="o">)</span>
</span><span class='line'>close<span class="o">(</span>13<span class="o">)</span>                               <span class="o">=</span> 0
</span><span class='line'>munmap<span class="o">(</span>0x7f03f9fc3000, 2113912<span class="o">)</span>         <span class="o">=</span> 0
</span><span class='line'>munmap<span class="o">(</span>0x7f03fb641000, 2105608<span class="o">)</span>         <span class="o">=</span> 0
</span><span class='line'>...
</span><span class='line'>munmap<span class="o">(</span>0x7f0402cd6000, 8192<span class="o">)</span>            <span class="o">=</span> 0
</span><span class='line'>munmap<span class="o">(</span>0x7f0402cf3000, 8192<span class="o">)</span>            <span class="o">=</span> 0
</span><span class='line'>munmap<span class="o">(</span>0x7f0402d03000, 8192<span class="o">)</span>            <span class="o">=</span> 0
</span><span class='line'>munmap<span class="o">(</span>0x7f0402cef000, 8192<span class="o">)</span>            <span class="o">=</span> 0
</span><span class='line'>--- SIGSEGV <span class="o">(</span>Segmentation fault<span class="o">)</span> @ 0 <span class="o">(</span>0<span class="o">)</span> ---
</span><span class='line'>+++ killed by SIGSEGV <span class="o">(</span>core dumped<span class="o">)</span> +++
</span></code></pre></td></tr></table></div></figure>


<h3>Devel:Trace</h3>

<h4>Perl-Modul Devel::Trace installieren</h4>

<p><code>sudo apt-get install libdevel-trace-perl</code></p>

<h4>Test</h4>

<figure class='code'><figcaption><span>Reproduktion mit &#8216;Devel::Trace&#8217; und &#8216;git-svn&#8217; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>date &gt;&gt;git-svn-absturz.txt
</span><span class='line'>git commit -m <span class="s2">&quot;Aktualisiert: git-svn-absturz.txt&quot;</span> .
</span><span class='line'>perl -d::Trace -f /usr/lib/git-core/git-svn dcommit
</span></code></pre></td></tr></table></div></figure>


<p>Dabei wird diese Ausgabe geliefert:</p>

<figure class='code'><figcaption><span>Ausgabe mit &#8216;Devel::Trace&#8217; </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>...
</span><span class='line'>&gt;&gt; /usr/share/perl5/Git/SVN.pm:1659:    unmemoize_svn_mergeinfo_functions<span class="o">()</span>;
</span><span class='line'>&gt;&gt; /usr/share/perl5/Git/SVN.pm:1626:        <span class="k">return if </span>not <span class="nv">$memoized</span>;
</span><span class='line'>&gt;&gt; /usr/share/perl5/Git/SVN.pm:85:  unlink keys %LOCKFILES <span class="k">if</span> %LOCKFILES;
</span><span class='line'>&gt;&gt; /usr/share/perl5/Git/SVN.pm:86:  unlink keys %INDEX_FILES <span class="k">if</span> %INDEX_FILES;
</span><span class='line'>&gt;&gt; /usr/lib/perl5/SVN/Core.pm:390:     <span class="nv">$globaldestroy</span> <span class="o">=</span> 1;
</span><span class='line'>&gt;&gt; /usr/lib/perl5/SVN/Core.pm:58:     SVN::_Core::apr_terminate<span class="o">()</span>;
</span><span class='line'>Speicherzugriffsfehler <span class="o">(</span>Speicherabzug geschrieben<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Richtig &ldquo;weiter&rdquo; kommen wir damit nicht &ndash; &ldquo;apr_terminate()&rdquo; ist
eine C-Funktion, die per SWIG in Perl eingebunden ist.</p>

<h2>Korrekturversuche</h2>

<h3>Neueste Version von serf-1.2.1</h3>

<figure class='code'><figcaption><span>Patch erzeugen </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git svn clone --stdlayout http://serf.googlecode.com/svn
</span><span class='line'>...
</span><span class='line'><span class="nv">r2111</span> <span class="o">=</span> 6e0d690806e4796d2d698e5fd6a33b91832b9fd3 <span class="o">(</span>refs/remotes/trunk<span class="o">)</span>
</span><span class='line'>  M   auth/auth_spnego.c
</span><span class='line'>  M   outgoing.c
</span><span class='line'><span class="nv">r2112</span> <span class="o">=</span> 40194aec74ce32ba844aafc0a5dbdda334f2abfb <span class="o">(</span>refs/remotes/trunk<span class="o">)</span>
</span><span class='line'>Checked out HEAD:
</span><span class='line'>  http://serf.googlecode.com/svn/trunk r2112
</span><span class='line'><span class="nv">$ </span>mv svn serf
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>serf
</span><span class='line'><span class="nv">$ </span>git diff remotes/tags/1.2.1 remotes/1.2.x &gt;serf-1.2.1-r2112.patch
</span></code></pre></td></tr></table></div></figure>


<p>Den dabei erzeugten Patch habe ich in die Patch-Serie von
SERF aufgenommen und ein neues SERF-Paket erzeugt und dieses
dann installiert mit</p>

<ul>
<li><code>sudo dpkg -i libserf1_1.2.1-0dp04~precise1_amd64.deb</code></li>
</ul>


<p>Ein Nachtest ergibt: Keine Besserung.</p>

<h3>Neueste Version von apr-1.4.8</h3>

<p>Der übliche Ablauf mittels</p>

<pre><code>* `uupdate -u ../apr-1.4.8.tar.gz`
* `cd ../apr-1.4.8`
* `dpkg-buildpackage`
</code></pre>

<p>funktioniert nicht &ndash; es werden viele fehlende Funktionen angemeckert von
<code>dh_makeshlibs</code>/<code>dpkg-gensymbols</code>:</p>

<figure class='code'><figcaption><span>Fehlende Funktionen </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>+#MISSING: 1.4.8-0dp01~precise1# apr__SHA384_Data@Base 1.2.7
</span><span class='line'>+#MISSING: 1.4.8-0dp01~precise1# apr__SHA384_End@Base 1.2.7
</span><span class='line'>+#MISSING: 1.4.8-0dp01~precise1# apr__SHA384_Final@Base 1.2.7
</span><span class='line'>+#MISSING: 1.4.8-0dp01~precise1# apr__SHA384_Init@Base 1.2.7
</span><span class='line'>+#MISSING: 1.4.8-0dp01~precise1# apr__SHA384_Update@Base 1.2.7
</span><span class='line'>+#MISSING: 1.4.8-0dp01~precise1# apr__SHA512_Data@Base 1.2.7
</span><span class='line'>+#MISSING: 1.4.8-0dp01~precise1# apr__SHA512_End@Base 1.2.7
</span><span class='line'>+#MISSING: 1.4.8-0dp01~precise1# apr__SHA512_Final@Base 1.2.7
</span><span class='line'>+#MISSING: 1.4.8-0dp01~precise1# apr__SHA512_Init@Base 1.2.7
</span><span class='line'>+#MISSING: 1.4.8-0dp01~precise1# apr__SHA512_Last@Base 1.2.7
</span><span class='line'>+#MISSING: 1.4.8-0dp01~precise1# apr__SHA512_Transform@Base 1.2.7
</span><span class='line'>+#MISSING: 1.4.8-0dp01~precise1# apr__SHA512_Update@Base 1.2.7</span></code></pre></td></tr></table></div></figure>


<p>Nach Anpassung von &hellip;/debian/symbols.common funktioniert&rsquo;s. Klar, die neue
Version ist nicht so richtig kompatibel zur alten Version. Muß ich im
Hinterkopf behalten.</p>

<p>Ein Nachtest ergibt: Keine Besserung, <code>git-svn</code> stürzt noch immer ab.
Also: Wieder die alte Version installieren: <code>sudo apt-get install libapr1=1.4.6\*</code>.</p>

<h3>Neueste Version von aprutil-1.5.2</h3>

<p>Auf <a href="http://www.linuxfromscratch.org/blfs/view/svn/general/subversion.html">LinuxFromScratch</a> gibt es einen Hinweis zur Verwendung der neuesten Version von aprutil.</p>

<ul>
<li>Alt:  1.3.12+dfsg-3</li>
<li>Neu:  1.5.2-1</li>
</ul>


<p>Paket erzeugt und installiert gefolgt vom Nachtest ergibt: Keine Besserung.
Also: Wieder die alte Version installieren: <code>sudo apt-get install libaprutil1=1.3.12*</code></p>

<h3>Test mit Subversion-1.8.3</h3>

<p>Wenn statt Subversion-1.8.1 die Version 1.8.3 verwendet wird, so tritt das Problem nach wie vor auf!
Die Version 1.8.3 bringt also keine Verbesserung.</p>

<h3>Test mit Git-1.8.4</h3>

<p>Wenn statt Git-1.8.3 die Version 1.8.4 verwendet wird, so tritt das Problem nach wie vor auf!
Die Version 1.8.4 bringt also keine Verbesserung.</p>

<h3>Anpassungen an /usr/share/perl5/Git/SVN/Ra.pm</h3>

<p>Unter diesem Link <a href="http://git.661346.n2.nabble.com/git-svn-fetch-segfault-on-exit-td7592205.html">http://git.661346.n2.nabble.com/git-svn-fetch-segfault-on-exit-td7592205.html</a>
gibt es einen Korrekturvorschlag:</p>

<figure class='code'><figcaption><span>Anpassungen an ./usr/share/perl5/Git/SVN/Ra.pm </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gd">--- /usr/share/perl5/Git/SVN/Ra.pm~ 2013-07-22 20:59:55.000000000 +0200</span>
</span><span class='line'><span class="gi">+++ /usr/share/perl5/Git/SVN/Ra.pm   2013-09-01 14:53:58.353718366 +0200</span>
</span><span class='line'><span class="gu">@@ -108,7 +108,7 @@</span>
</span><span class='line'>                        config =&gt; $config,
</span><span class='line'>                pool =&gt; SVN::Pool-&gt;new,
</span><span class='line'>                        auth_provider_callbacks =&gt; $callbacks);
</span><span class='line'><span class="gd">-    $RA = bless $self, $class;</span>
</span><span class='line'><span class="gi">+    $self = bless $self, $class;</span>
</span><span class='line'>
</span><span class='line'>  # Make sure its canonicalized
</span><span class='line'>  $self-&gt;url($url);
</span><span class='line'><span class="gu">@@ -118,7 +118,7 @@</span>
</span><span class='line'>  $self-&gt;{cache} = { check_path =&gt; { r =&gt; 0, data =&gt; {} },
</span><span class='line'>                     get_dir =&gt; { r =&gt; 0, data =&gt; {} } };
</span><span class='line'>
</span><span class='line'><span class="gd">-    return $RA;</span>
</span><span class='line'><span class="gi">+    return $self;</span>
</span><span class='line'> }
</span><span class='line'>
</span><span class='line'> sub url {
</span></code></pre></td></tr></table></div></figure>


<p>Mit diesen Änderungen tritt der Fehler nicht mehr auf. Sie deaktivieren
die Verwendung der lokalen Variablen <code>$RA</code>, diese bleibt damit immer auf dem
Wert <code>undef</code>.</p>

<h3>Korrektur von /usr/share/perl5/Git/SVN/Ra.pm</h3>

<p>Nähere Analysen ergeben, dass der Destruktor von <code>$RA</code> nicht aufgerufen
wird. Dadurch gibt es dann einen Absturz bei <code>apr_terminate()</code>. Mit
nachfolgender Änderung wird der Destruktor aufgerufen, bevor
<code>apr_terminate()</code> ausgeführt wird.</p>

<figure class='code'><figcaption><span>Korrektur von ./usr/share/perl5/Git/SVN/Ra.pm </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gd">--- git-1.8.4.orig/perl/Git/SVN/Ra.pm   2013-09-01 14:30:23.629989557 +0000</span>
</span><span class='line'><span class="gi">+++ git-1.8.4/perl/Git/SVN/Ra.pm        2013-09-02 06:55:19.666260617 +0000</span>
</span><span class='line'><span class="gu">@@ -32,6 +32,10 @@</span>
</span><span class='line'>        }
</span><span class='line'> }
</span><span class='line'>
</span><span class='line'><span class="gi">+END {</span>
</span><span class='line'><span class="gi">+  $RA = undef;</span>
</span><span class='line'><span class="gi">+}</span>
</span><span class='line'><span class="gi">+</span>
</span><span class='line'> sub _auth_providers () {
</span><span class='line'>        my @rv = (
</span><span class='line'>          SVN::Client::get_simple_provider(),
</span></code></pre></td></tr></table></div></figure>


<p>Die oben aufgeführte Korrektur habe ich auch an die Git-Mailing-Liste
geschickt.</p>

<h2>Korrektur</h2>

<p>Mit meinen neuesten Paketen tritt das Problem nicht mehr auf:</p>

<ul>
<li>subversion-1.8.3 (&hellip; oder neuer)</li>
<li>git-1.8.4-0dp10 (&hellip; oder neuer)</li>
</ul>


<h2>Änderungen</h2>

<ul>
<li>2013-08-15: Test mit aprutil-1.5.2</li>
<li>2013-09-01: Subversion-1.8.3, Git-1.8.4, Anpassungen an /usr/share/perl5/Git/SVN/Ra.pm, Korrektur</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress und Git ohne Umbenennung]]></title>
    <link href="http://uli-heller.github.com/blog/2013/08/05/octopress-git/"/>
    <updated>2013-08-05T08:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/08/05/octopress-git</id>
    <content type="html"><![CDATA[<p>Octopress hat die Eigenart, bei Verwendung von Git als &ldquo;Deployment-Methode&rdquo;
die Zweige umzubenennen:</p>

<ul>
<li>Umbenennung: origin &ndash;> octopress</li>
<li>Neuanlage:   origin &lt;&ndash; repo_url</li>
<li>Umbenennung: master &ndash;> source</li>
<li>etc.</li>
</ul>


<p>Die ganze Umbenennerei gefällt mir garnicht. Ich mag&rsquo;s so:</p>

<ul>
<li>uli-octopress: Das ist mein &ldquo;normales&rdquo; GitHub-Repository, in dem ich alle
Quelltexte meiner Octopress-Installation halte</li>
<li>uli-heller.github.com: Das ist das GitHub-Repository, in dem ich die
generierten HTML-Seiten veröffentliche</li>
</ul>


<!-- more -->


<h2>uli-octopress</h2>

<p>Hierbei gibt es keine Besonderheiten. Einfach das Repository in GitHub
anlegen und klonen wie üblich.</p>

<h2>uli-heller.github.com</h2>

<p>Am besten erstmal einfach leer anlegen mit einem Branch namens &ldquo;master&rdquo;.</p>

<h2>Deployment-Methode konfigurieren</h2>

<h3>_deploy</h3>

<p>Das Verzeichnis &ldquo;_deploy&rdquo; wird angelegt durch <code>git clone ...</code> und
anschließendes Umbenennen mit <code>mv ...</code>.</p>

<figure class='code'><figcaption><span>Anlegen des Verzeichnisses _deploy </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>uli-octopress
</span><span class='line'>
</span><span class='line'>uli-octopress<span class="nv">$ </span>git clone git@github.com:uli-heller/uli-heller.github.com.git
</span><span class='line'>Klone nach <span class="s1">&#39;uli-heller.github.com&#39;</span>...
</span><span class='line'>remote: Counting objects: 14438, <span class="k">done</span>.
</span><span class='line'>remote: Compressing objects: 100% <span class="o">(</span>3999/3999<span class="o">)</span>, <span class="k">done</span>.
</span><span class='line'>remote: Total 14438 <span class="o">(</span>delta 7274<span class="o">)</span>, reused 13662 <span class="o">(</span>delta 6502<span class="o">)</span>
</span><span class='line'>Empfange Objekte: 100% <span class="o">(</span>14438/14438<span class="o">)</span>, 16.14 MiB | 218.00 KiB/s, <span class="k">done</span>.
</span><span class='line'>Löse Unterschiede auf: 100% <span class="o">(</span>7274/7274<span class="o">)</span>, <span class="k">done</span>.
</span><span class='line'>Checking connectivity... <span class="k">done</span>
</span><span class='line'>
</span><span class='line'>uli-octopress<span class="nv">$ </span>mv uli-heller.github.com _deploy
</span></code></pre></td></tr></table></div></figure>


<h3>Rakefile</h3>

<p>Nun noch Anpassungen an Rakefile:</p>

<figure class='code'><figcaption><span>Anpassungen am Rakefile </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gh">diff --git a/Rakefile b/Rakefile</span>
</span><span class='line'><span class="gh">index f3ada93..321c3c5 100644</span>
</span><span class='line'><span class="gd">--- a/Rakefile</span>
</span><span class='line'><span class="gi">+++ b/Rakefile</span>
</span><span class='line'><span class="gu">@@ -9,10 +9,10 @@ ssh_port       = &quot;22&quot;</span>
</span><span class='line'> document_root  = &quot;~/website.com/&quot;
</span><span class='line'> rsync_delete   = false
</span><span class='line'> rsync_args     = &quot;&quot;  # Any extra arguments to pass to rsync
</span><span class='line'><span class="gd">-deploy_default = &quot;rsync&quot;</span>
</span><span class='line'><span class="gi">+deploy_default = &quot;push&quot;</span>
</span><span class='line'>
</span><span class='line'> # This will be configured for you when you run config_deploy
</span><span class='line'><span class="gd">-deploy_branch  = &quot;gh-pages&quot;</span>
</span><span class='line'><span class="gi">+deploy_branch  = &quot;master&quot;</span>
</span><span class='line'>
</span><span class='line'> ## -- Misc Configs -- ##
</span></code></pre></td></tr></table></div></figure>


<h2>Test</h2>

<figure class='code'><figcaption><span>Test </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>uli-octopress<span class="nv">$ </span>rake generate
</span><span class='line'><span class="c">## Generating Site with Jekyll</span>
</span><span class='line'>identical <span class="nb">source</span>/stylesheets/screen.css
</span><span class='line'>Configuration from /home/uli/git/octopress/_config.yml
</span><span class='line'>Building site: <span class="nb">source</span> -&gt; public
</span><span class='line'>...
</span><span class='line'>Successfully generated site: <span class="nb">source</span> -&gt; public
</span><span class='line'>
</span><span class='line'>uli-octopress<span class="nv">$ </span>rake preview
</span><span class='line'>Starting to watch <span class="nb">source </span>with Jekyll and Compass. Starting Rack on port 4000
</span><span class='line'><span class="o">[</span>2013-08-05 07:55:34<span class="o">]</span> INFO  WEBrick 1.3.1
</span><span class='line'>...
</span><span class='line'>
</span><span class='line'>uli-octopress<span class="nv">$ </span>rake deploy
</span><span class='line'><span class="c">## Generating Site with Jekyll</span>
</span><span class='line'>identical <span class="nb">source</span>/stylesheets/screen.css
</span><span class='line'>Configuration from /home/uli/git/octopress/_config.yml
</span><span class='line'>Building site: <span class="nb">source</span> -&gt; public
</span><span class='line'>...
</span><span class='line'><span class="c">## Pushing generated _deploy website</span>
</span><span class='line'>Counting objects: 710, <span class="k">done</span>.
</span><span class='line'>Delta compression using up to 4 threads.
</span><span class='line'>Compressing objects: 100% <span class="o">(</span>275/275<span class="o">)</span>, <span class="k">done</span>.
</span><span class='line'>Writing objects: 100% <span class="o">(</span>382/382<span class="o">)</span>, 95.23 KiB | 0 bytes/s, <span class="k">done</span>.
</span><span class='line'>Total 382 <span class="o">(</span>delta 194<span class="o">)</span>, reused 0 <span class="o">(</span>delta 0<span class="o">)</span>
</span><span class='line'>To git@github.com:uli-heller/uli-heller.github.com.git
</span><span class='line'>   4d99436..e7770a8  master -&gt; master
</span><span class='line'>
</span><span class='line'><span class="c">## Github Pages deploy complete</span>
</span><span class='line'><span class="nb">cd</span> -
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress-Fehler: Liquid Exception: undefined method `sort!' for nil:NilClass in post]]></title>
    <link href="http://uli-heller.github.com/blog/2013/08/04/octopress-category-generator/"/>
    <updated>2013-08-04T19:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/08/04/octopress-category-generator</id>
    <content type="html"><![CDATA[<p>Beim Ausführen von <code>rake generate</code> erscheint die Fehlermeldung:</p>

<pre><code>Liquid Exception: undefined method `sort!' for nil:NilClass in post
.../octopress/plugins/category_generator.rb:157:in `category_links'
</code></pre>

<!-- more -->


<p>Die Korrektur erfolgt bspw. durch diese Änderung:</p>

<figure class='code'><figcaption><span>Änderung an ../pligins/category_generator.rb </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gh">diff --git a/plugins/category_generator.rb b/plugins/category_generator.rb</span>
</span><span class='line'><span class="gh">index a49c429..63dbf97 100644</span>
</span><span class='line'><span class="gd">--- a/plugins/category_generator.rb</span>
</span><span class='line'><span class="gi">+++ b/plugins/category_generator.rb</span>
</span><span class='line'><span class="gu">@@ -153,6 +153,7 @@ ERR</span>
</span><span class='line'>     # Returns string
</span><span class='line'>     #
</span><span class='line'>     def category_links(categories)
</span><span class='line'><span class="gi">+     if categories != nil</span>
</span><span class='line'>       categories = categories.sort!.map { |c| category_link c }
</span><span class='line'>
</span><span class='line'>       case categories.length
</span><span class='line'><span class="gu">@@ -163,6 +164,7 @@ ERR</span>
</span><span class='line'>       else
</span><span class='line'>         &quot;#{categories[0...-1].join(&#39;, &#39;)}, #{categories[-1]}&quot;
</span><span class='line'>       end
</span><span class='line'><span class="gi">+     end</span>
</span><span class='line'>     end
</span><span class='line'>
</span><span class='line'>     # Outputs a single category as an &lt;a&gt; link.
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Fotogallerie Südtirol und Tripsdrill]]></title>
    <link href="http://uli-heller.github.com/blog/2013/08/04/fotogallerie/"/>
    <updated>2013-08-04T11:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/08/04/fotogallerie</id>
    <content type="html"><![CDATA[<p>Test einer Fotogallerie &ndash; Bilder aus Südtirol und Tripsdrill.</p>

<!-- more -->




<script src="http://uli-heller.github.com/javascripts/fotorama/jquery-1.10.2.min.js"></script>


<p><link href="http://uli-heller.github.com/javascripts/fotorama/fotorama.css" rel="stylesheet"><script src="http://uli-heller.github.com/javascripts/fotorama/fotorama.js"></script><div class="fotorama" data-autoplay="3000" data-transition="dissolve" data-nav="thumbs" data-allow-full-screen="true" data-keyboard="true" data-width="640" data-height="480" data-thumb-with="64" data-thumb-height="48"><a href="http://uli-heller.github.com/images/galleries/test/scaled/mammut.jpg" data-full="/images/galleries/test/mammut.jpg" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/test/thumbs/mammut.jpg" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/test/scaled/neustift-2.jpg" data-full="/images/galleries/test/neustift-2.jpg" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/test/thumbs/neustift-2.jpg" data-fit="scaledown"/></a><a href="http://uli-heller.github.com/images/galleries/test/scaled/neustift.jpg" data-full="/images/galleries/test/neustift.jpg" data-fit="scaledown"><img src="http://uli-heller.github.com/images/galleries/test/thumbs/neustift.jpg" data-fit="scaledown"/></a></div> <!--class="fotorama" data-nav="thumbs" --></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Fotogallerie für Octopress]]></title>
    <link href="http://uli-heller.github.com/blog/2013/08/04/gallery/"/>
    <updated>2013-08-04T10:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/08/04/gallery</id>
    <content type="html"><![CDATA[<p>Zur Illustration der CentOS-Installation benötige ich eine Fotogallerie in
meiner Octopress-Installation. In diesem Artikel beschreibe ich das
Vorgehen.</p>

<!-- more -->


<h2>Neues Plugin: octopress-gallery</h2>

<p>Ich verwende das Plugin <a href="https://github.com/yortz/octopress_gallery">Octopress-Gallery</a>
zur Anzeige der Fotogallerie.</p>

<h3>Vorbereitungen</h3>

<p>Pfad zur Octopress-Installation: <code>OP=/home/UliHeller/octopress</code></p>

<h3>Grundinstallation</h3>

<ul>
<li>Auschecken: <code>git clone https://github.com/yortz/octopress_gallery.git</code></li>
<li>Kopieren

<ul>
<li><code>cp octopress_gallery/plugins/gallery_tag.rb "${OP}/plugins/."</code></li>
<li><code>cp octopress_gallery/plugins/mini_magick.rb "${OP}/plugins/."</code></li>
</ul>
</li>
<li>Erweitern von &ldquo;${OP}/Gemfile&rdquo;: Neue Zeile <code>gem 'mini_magick'</code></li>
<li>Installieren der Zusatz-Gems: <code>cd "${OP}"; bundle install</code></li>
</ul>


<h3>Bilder ablegen</h3>

<ul>
<li><code>mkdir "${OP}/sources/images/galleries"</code></li>
<li><code>mkdir "${OP}/sources/images/galleries/test"</code></li>
<li><code>cp *.jpg "${OP}/sources/images/galleries/test"</code></li>
</ul>


<h3>Gallerie konfigurieren</h3>

<h4>_config.yml</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mini_magick:
</span><span class='line'>    test_thumbnail:
</span><span class='line'>      source: images/galleries/test
</span><span class='line'>      destination: images/galleries/test/thumbs
</span><span class='line'>      commands:
</span><span class='line'>        - thumbnail: "64x48^"
</span><span class='line'>        - crop: "64x48-0x0"</span></code></pre></td></tr></table></div></figure>


<h4>Gallerie in Artikel &ldquo;anziehen&rdquo;</h4>

<p>Diese Zeile muß in einem Artikel auftauchen:</p>

<pre>
{{ 'test' | image_list }}
</pre>


<h2>Hübschere Präsentation mit Fotorama</h2>

<p>Die Präsentation der Gallerie ist in der Grundversion sehr schlicht.
Durch die Verwendung von <a href="http://fotorama.io/">Fotorama</a> wird das deutlich
hübscher.</p>

<h3>JQuery und Fotorama runterladen und ablegen</h3>

<ul>
<li><code>mkdir ${OP}/source/javascripts/fotorama</code></li>
<li><code>wget http://code.jquery.com/jquery-1.10.2.min.js</code></li>
<li><code>mv jquery-1.10.2.min.js ${OP}/source/javascripts/fotorama/.</code></li>
</ul>


<h3>Fotorama runterladen und ablegen</h3>

<ul>
<li><code>wget http://fotorama.s3.amazonaws.com/4.2.3/fotorama-4.2.3.zip</code></li>
<li><code>mv fotorama-4.2.3.zip fotorama-4.2.3.zip.gz</code></li>
<li><code>gzip -d fotorama-4.2.3.zip.gz</code></li>
<li><code>unzip -d tmp fotorama-4.2.3.zip</code></li>
<li><code>mv tmp/fotorama-4.2.3/foto* ${OP}/source/javascripts/fotorama/.</code></li>
<li><code>rm -rf tmp</code></li>
</ul>


<h3>Anpassungen an plugins/gallery_tag.rb</h3>

<figure class='code'><figcaption><span>Anpassungen an plugins/gallery_tag.rb </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gh">diff --git a/plugins/gallery_tag.rb b/plugins/gallery_tag.rb</span>
</span><span class='line'><span class="gh">index 6dc0c14..b2d8037 100644</span>
</span><span class='line'><span class="gd">--- a/plugins/gallery_tag.rb</span>
</span><span class='line'><span class="gi">+++ b/plugins/gallery_tag.rb</span>
</span><span class='line'><span class="gu">@@ -4,14 +4,20 @@ module ImageList</span>
</span><span class='line'>   def image_list( name )
</span><span class='line'>    unless name == nil
</span><span class='line'>     list = Array.new
</span><span class='line'><span class="gi">+    list &lt;&lt; %Q{&lt;script src=&quot;/javascripts/fotorama/jquery-1.10.2.min.js&quot;&gt;&lt;/script&gt;}</span>
</span><span class='line'><span class="gi">+    list &lt;&lt; %Q{&lt;link href=&quot;/javascripts/fotorama/fotorama.css&quot; rel=&quot;stylesheet&quot;&gt;}</span>
</span><span class='line'><span class="gi">+    list &lt;&lt; %Q{&lt;script src=&quot;/javascripts/fotorama/fotorama.js&quot;&gt;&lt;/script&gt;}</span>
</span><span class='line'><span class="gi">+    list &lt;&lt; %Q{&lt;div class=&quot;fotorama&quot; data-autoplay=&quot;3000&quot; data-transition=&quot;dissolve&quot; data-nav=&quot;thumbs&quot; data-allow-full-screen=&quot;true&quot; data-keyboard=&quot;true&quot; data-w</span>
</span><span class='line'>     dir = Dir.new( File.join(BASE_DIR, name) )
</span><span class='line'><span class="gd">-    dir.each do | d |</span>
</span><span class='line'><span class="gi">+    dir.sort.each do | d |</span>
</span><span class='line'>       image = File.basename(d, File.extname(d))
</span><span class='line'>       unless d =~ /^\./ || d =~ /thumbs/
</span><span class='line'><span class="gd">-        list &lt;&lt; %Q{&lt;a href=&quot;/images/galleries/#{name}/#{d}&quot; rel=&quot;shadowbox&quot; title=&quot;#{image}&quot;&gt;&lt;img src=&quot;/images/galleries/#{name}/thumbs/#{d}&quot; /&gt;&lt;/a&gt;}</span>
</span><span class='line'><span class="gi">+#        list &lt;&lt; %Q{&lt;a href=&quot;/images/galleries/#{name}/#{d}&quot; rel=&quot;shadowbox&quot; title=&quot;#{image}&quot;&gt;&lt;img src=&quot;/images/galleries/#{name}/thumbs/#{d}&quot; /&gt;&lt;/a&gt;}</span>
</span><span class='line'><span class="gi">+        list &lt;&lt; %Q{&lt;a href=&quot;/images/galleries/#{name}/#{d}&quot;&gt;&lt;img src=&quot;/images/galleries/#{name}/thumbs/#{d}&quot;/&gt;&lt;/a&gt;}</span>
</span><span class='line'>       end
</span><span class='line'>     end
</span><span class='line'><span class="gd">-    list.sort.join( &quot;\n&quot; )</span>
</span><span class='line'><span class="gi">+    list &lt;&lt; %Q{&lt;/div&gt; &lt;!--class=&quot;fotorama&quot; data-nav=&quot;thumbs&quot; --&gt;}</span>
</span><span class='line'><span class="gi">+#    list.sort.join( &quot;\n&quot; )</span>
</span><span class='line'>    end
</span><span class='line'>   end
</span><span class='line'> end
</span></code></pre></td></tr></table></div></figure>


<h2>Probleme</h2>

<h3>Liquid Exception: no implicit conversion of nil into String in atom.xml</h3>

<p>Die Ausführung von <code>rake generate</code> bricht ab mit einer Fehlermeldung:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rake generate
</span><span class='line'>## Generating Site with Jekyll
</span><span class='line'>unchanged sass/print.scss
</span><span class='line'>identical source/stylesheets/screen.css 
</span><span class='line'>Configuration from .../dp-octopress/_config.yml
</span><span class='line'>Building site: source -> public
</span><span class='line'>Liquid Exception: no implicit conversion of nil into String in atom.xml
</span><span class='line'>.../dp-octopress/plugins/gallery_tag.rb:10:in `join'
</span><span class='line'>.../dp-octopress/plugins/gallery_tag.rb:10:in `image_list'
</span><span class='line'>...</span></code></pre></td></tr></table></div></figure>


<p>Abhilfe: Anpassungen an plugins/gallery_tag.rb vornehmen:</p>

<figure class='code'><figcaption><span>Anpassungen an plugins/gallery_tag.rb </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gh">diff --git a/plugins/gallery_tag.rb b/plugins/gallery_tag.rb</span>
</span><span class='line'><span class="gh">index f895040..6dc0c14 100644</span>
</span><span class='line'><span class="gd">--- a/plugins/gallery_tag.rb</span>
</span><span class='line'><span class="gi">+++ b/plugins/gallery_tag.rb</span>
</span><span class='line'><span class="gu">@@ -2,6 +2,7 @@ BASE_DIR = &#39;source/images/galleries&#39;</span>
</span><span class='line'>
</span><span class='line'> module ImageList
</span><span class='line'>   def image_list( name )
</span><span class='line'><span class="gi">+   unless name == nil</span>
</span><span class='line'>     list = Array.new
</span><span class='line'>     dir = Dir.new( File.join(BASE_DIR, name) )
</span><span class='line'>     dir.each do | d |
</span><span class='line'><span class="gu">@@ -11,6 +12,7 @@ module ImageList</span>
</span><span class='line'>       end
</span><span class='line'>     end
</span><span class='line'>     list.sort.join( &quot;\n&quot; )
</span><span class='line'><span class="gi">+   end</span>
</span><span class='line'>   end
</span><span class='line'> end
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
</feed>
